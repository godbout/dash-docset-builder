<!DOCTYPE html>
<html lang="en" id="page_3686"><!-- Online page at http://doc.tiki.org/PluginDBReport -->
<head>
	
<!--Latest IE Compatibility-->
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="generator" content="Tiki Wiki CMS Groupware - https://tiki.org">

<meta content="http://doc.tiki.org/" name="twitter:domain"> 


			<link rel="canonical" href="PluginDBReport.html">
		<meta content="http://doc.tiki.org/PluginDBReport" property="og:url">
	
	<meta name="keywords" content="documentation, tiki, tikiwiki, document, help, install, wiki syntax  ">
	<meta name="author" content="Tiki Community">

		<meta name="description" content="Tiki Wiki CMS Groupware Official Documentation" property="og:description">
	<meta name="twitter:description" content="Tiki Wiki CMS Groupware Official Documentation">
	<meta name="revisit-after" content="15 days">

<meta content="Documentation for Tiki Wiki CMS Groupware" property="og:site_name">
<meta content="Documentation for Tiki Wiki CMS Groupware" name="twitter:site">



<title>PluginDBReport | Documentation for Tiki Wiki CMS Groupware</title>


<meta property="og:title" content="PluginDBReport | Documentation for Tiki Wiki CMS Groupware">

<meta name="twitter:title" content="PluginDBReport | Documentation for Tiki Wiki CMS Groupware">

			<meta content="website" property="og:type">
	

<meta name="twitter:card" content="summary">

						

	<link rel="alternate" type="application/rss+xml" title="Tiki RSS feed for the wiki pages" href="http://doc.tiki.org/tiki-wiki_rss.php?ver=2">
	<link rel="alternate" type="application/rss+xml" title="Tiki RSS feed for articles" href="http://doc.tiki.org/tiki-articles_rss.php?ver=2">
	<link rel="alternate" type="application/rss+xml" title="Tiki RSS feed for image galleries" href="http://doc.tiki.org/tiki-image_galleries_rss.php?ver=2">
	<link rel="alternate" type="application/rss+xml" title="Tiki RSS feed for file galleries" href="http://doc.tiki.org/tiki-file_galleries_rss.php?ver=2">
	<!--[if lt IE 9]>
	<script src="vendor_bundled/vendor/afarkas/html5shiv/dist/html5shiv.min.js" type="text/javascript"></script>
<![endif]-->
		
<meta name="msapplication-config" content="themes/base_files/favicons/browserconfig.xml">

<link rel="icon" href="themes/base_files/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="apple-touch-icon" href="themes/base_files/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="themes/base_files/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="manifest" href="themes/base_files/favicons/site.webmanifest.html">
<link rel="shortcut icon" href="themes/base_files/favicons/favicon.ico">
<link rel="mask-icon" href="themes/base_files/favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="stylesheet" href="temp/public/codemirror_modes.css" type="text/css">
<link rel="stylesheet" href="themes/base_files/css/tiki_base.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/bower-asset/fontawesome/css/all.css" type="text/css">
<link rel="stylesheet" href="themes/fivealive-lite/css/fivealive-lite.css" type="text/css">
<link rel="stylesheet" href="themes/fivealive-lite/options/kiwi/css/kiwi.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/studio-42/elfinder/css/elfinder.full.css" type="text/css">
<link rel="stylesheet" href="lib/openlayers/theme/default/style.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/codemirror/codemirror/lib/codemirror.css" type="text/css">
<link rel="stylesheet" href="themes/base_files/feature_css/codemirror_tiki.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/components/jqueryui/themes/flick/jquery-ui.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/jquery-plugins/colorbox/example1/colorbox.css" type="text/css">
<link rel="stylesheet" href="vendor_bundled/vendor/jquery-plugins/treetable/css/jquery.treetable.css" type="text/css">
<link rel="stylesheet" href="themes/base_files/feature_css/svg-edit-draw.css" type="text/css">
<style type="text/css"><!--
/* css 0 */
@media (min-width: 1200px) { .container { max-width:1240px; } }

.img_zoom {
	display:inline-block;
}
.img_zoom:after {
	content:"";
	display:block;
	width:33px;
	height:33px;
	position:absolute;
	top:0;
	right:0;
	background:url(vendor_bundled/vendor/jquery-plugins/zoom/icon.png);
}
.img_zoom img {
	display:block;
}

.ui-autocomplete-loading { background: white url("img/spinner.gif") right center no-repeat; }
div#outerToc {
	top: 31px;
}
.sitelogo {
	line-height: 46px; /* same as .sitetitle */
}
.navbar-fixed-top .sitelogo a img, .layout_fixed_top_modules #top_modules .sitelogo a img {
	margin-right: 0;
	margin-top: 0;
}

@media (max-width:991px) {
  .navbar-brand {
    font-size: 12px; 
    width: 65%;
    overflow-x: hidden;
    white-space: nowrap;
    text-overflow: "&hellip;"; }
  }

.ui-autocomplete-loading { background: white url("img/spinner.gif") right center no-repeat; }

.wikitext .card {
    margin-bottom: 1rem;
}

#module_75 .card-body,
#module_25 .card-body { /* keywords module for Tiki 13 (jb) */
    height: 20em;
    overflow-y: scroll;
    overflow-x: hidden;
}

#module_75 .card-body .nav > li > a { padding: 0 15px; }

/* Display first paragraph of wiki pages as a leading text */
#page-data > p:first-of-type, .wikipreview .wikitext > p:first-of-type {
    font-size: 120%;
    padding: 2rem;
    background: #f0f0f0;
    border-radius: .5rem;
    box-shadow: rgba(50, 50, 50, .15) 0 3rem 3rem -2rem inset, rgba(50, 50, 50, 0.1) 0 -1rem 2rem -1rem inset;
}
#page-data > p:first-of-type > br:first-of-type, .wikipreview .wikitext > p:first-of-type > br:first-of-type {
    display: none;
}

#page-data a {
	font-weight: bold;
}

@-ms-viewport{
	width: auto!important;
}

/* Reduce page-top vertical whitespace */
#alternate_register_link_because_InterTiki > br,
#doc-dev-crosslinks > br { display: none; }

/* Responsive Youtube videos - video wrapper class */
.video-wrapper {
     position: relative;
     padding-bottom: 56.25%;
     padding-top: 10px;
     overflow: hidden;
 }
 .video-wrapper iframe {
     position: absolute;
     width: 100%;
     height: 100%;
     top: 0;
     left: 0;
 }

/* End Responsive Youtube videos - video wrapper class */

/* test to make dropdowns visible in mobile views */
.tiki .navbar-collapse.in { overflow-y: visible; }

/* Fix bad contrast- check and fix in stylesheet - GC-L 8/18 */
.tiki-edit_structure .structure-container .ui-state-default { background: inherit; }

footer.help-block {  border-top: 1px solid #737373; padding: .7em 0; margin-bottom: 1.2em; }

/* Added for Tiki 19 - will move to stylesheet if it's a general fix/improvement. */
#bottom_modules .row { width: 100%; max-width: 100%; }
#bottom_modules .icon-link-external { display: none; } 
#bottom_modules h4 { font-size: 1.2rem; }
#bottom_modules ul { list-style: none; padding-left: 0; }

textarea, .CodeMirror {
    font-family: monospace !important;
}

/* Added by Bsfez for the Video Tutorials pages */

.row .videoTutorials {
  margin-bottom: 1em;
  border-bottom: 1px solid #ccc
}

.videoTitle h5 a.heading-link {display:none}
/*
.videoLevel-Beginner,
.videoLevel-Intermediate,
.videoLevel-PowerUser,
.videoLevel-Developer,
.videoRole,
.videoTitle a.wiki.external,
.videoTag {
  font-size: small
}*/

.videoLevel-Beginner {color: #117485}
.videoLevel-Intermediate {color: #a59705}
.videoLevel-PowerUser {color: #a53723}
.videoLevel-Developer {color: #a51e37}
.videoRole {color: #888}

.videoTitle h5 {margin-bottom:0.1em}
.videoTitle p {margin-bottom:0.2em}

.videoTitle a.wiki.external,
.videoTitle a:hover.wiki.external {
  word-break: normal;
  letter-spacing: -0.05em;
}

.videoTitle a.wiki.external:before,
.videoTitle a.wiki.external:after,
.videoTitle a:hover.wiki.external:before,
.videoTitle a:hover.wiki.external:after
{display: none}

.videoTitle a:hover.wiki.external {padding-left:0}

.videoDescription {
  overflow: hidden;
  position: relative; 
  line-height: 1.2em;
  max-height: 6em; 
  text-align: justify;
}

/* END - Added by Bsfez for the Video Tutorials pages */

/* Added by Bsfez for the tooh joinus message */
#mod-menutopbar1 > nav > div > ul > li:nth-child(8) > a {
  font-weight: bold;
  margin-left: 6em;
  color: rgb(255, 248, 33);}
/* END Added by Bsfez for the tooh joinus message */

/* Make input labels inline on "Video-Tutorials" */
.videoresourceTikiExperienceLevel input+br, .videoresourceTikiUserGroupRole input+br {display: none; }

/* Limit height of video transcript */
.transcript-container { max-height: 300px; overflow-y: auto; }

/* temp fix - Gary */
.tiki .col-lg-9 {
    flex-basis: 75%;
}

/* was: liquid layout to display all of wide table */
#page_5154 .field259 { width: 280px; } 
/*#page_5154 .tiki .container {width: 100%; max-width: 100%; }
#page_5154 .tiki #col1 .table-responsive {overflow: visible; width: inherit; border-right-color: transparent;}
#page_5154 .tiki #col1 .table-responsive > .table { width: 1200px; }*/

.modal-dialog {
    width: 80%; /* responsive width */
}

@media (min-width: 1200px) { .container { width:1240px; max-width:1240px;} }
-->
</style>
	<style type="text/css">#sitelogo img {margin-top: 0; position: relative; top: -12px;}</style>

<link rel="stylesheet" href="../themes.tiki.org/tiki-index_raw.php%3Fpage=Tiki_org_family_customizations_CSS&amp;clean&amp;textonly&amp;download&amp;css.css" type="text/css">

<link rel="stylesheet" href="../themes.tiki.org/tiki-index_raw.php%3Fpage=Tiki_org_family_headers_fix_CSS&amp;clean&amp;textonly&amp;download&amp;css.css" type="text/css">

<meta name="google-site-verification" content="OKHyWtoBAnRUctKvFQmKl2x1cAPGnHf8y_h8zUu-aeo">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<style type="text/css">
	
	/* Prevent target anchors from being covered by fixed top navbar */
	h1:target:before,
	h2:target:before,
	h3:target:before,
	h4:target:before,
	h5:target:before,
	h6:target:before {
		content: "";
		display: block;
		height: 44px; /* fixed header height*/
		margin: -44px 0 0; /* negative fixed header height */
	}
	</style></head>
<body class="tiki tiki-index tiki_wiki_page fixed_width layout_social en hide_zone_left" style="padding-top: 0;">
	

	



	

			<div id="ajaxLoading">Loading...</div>
<div id="ajaxLoadingBG"> </div>
<div id="ajaxDebug"></div>
		<div class="middle_outer" id="middle_outer">
					<div class="fixed-topbar"></div>
				<div class="container container-std middle" id="middle">
						
						

			<div class="row row-middle" id="row-middle">
															
									<div class="d-flex flex-row flex-wrap w-100">
					<div class="col col1 col-md-12 col-lg-9 order-md-1 order-lg-2 pb-4" id="col1">
													
												

<div id="tikifeedback">
	</div>

						
			
<div class="wikitopline clearfix" style="clear: both;">
	<div class="content">
					<div class="wikiinfo float-left">
				
				
				Query an ADOdb database and display results

											</div>
		 
					<div class="wikiinfo float-left" id="pdfinfo" style="display:none">
				<div class="alert alert-info" style="width:500px"><h4><span class="icon icon-information fas fa-info-circle fa-fw "></span> <span class="rboxtitle">Please wait</span></h4><div class="rboxcontent" style="display: inline"><span class="fas fa-circle-notch fa-spin" style="font-size:24px"></span> The PDF is being prepared, please wait...</div></div>
			</div>
			</div> 
</div> 

	
	
						
				
		
	
						
						
			
	
				
	
				
	<article id="top" class="wikitext clearfix nopagetitle" style="padding-top: 44px;">
					
			
							

			
												 

		
		<div id="page-data" class="clearfix">
										<div class="card bg-light"><div class="card-body"> This feature has not had any development in many years. You probably should also look into:
<ul><ul><li> <a href="PluginTrackerList.html" title="List, filter and sort the items in a tracker" class="wiki wiki_page">PluginTrackerList</a> for simple reports
</li><li> <a href="PluginList.html" title="Search for, list, and filter all types of items and display custom formatted results" class="wiki wiki_page">PluginList</a> for advanced reports
</li></ul></ul> </div></div>
<p>
<br>
</p>

<div id="rbox_1" class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button><div class="alert-heading h4"><span class="icon icon-warning fas fa-exclamation-triangle "></span> <span class="rboxtitle">Warning</span></div><div class="rboxcontent" style="display: inline">If you're using Tiki 4 or later and this, this plugin won't work unless the database is accessed through adodb. The site administrator can switch to using adodb by adding this line at the end of the <em>db/local.php</em> file: <br><strong>&amp;api_tiki='adodb';</strong><br>However switching to adodb may impact site performance. <a href="PluginSQL.html" title="Query a MySQL database and display the results" class="wiki wiki_page">PluginSQL</a> may be an alternative - it is a similar plugin that doesn't require adodb. </div></div>


<p>
</p>
<a name="//apple_ref/cpp/Section/Top" class="dashAnchor"></a><h1 class="showhide_heading" id="Overview">Overview<a href="PluginDBReport.html#Overview" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h1>
<p>Use this <a href="http://doc.tiki.org/wiki%20plugin" title="" class="wiki wiki_page">wiki plugin</a>, introduced in <a href="http://doc.tiki.org/Tiki3" title="Tiki3" class="wiki wiki_page">Tiki3</a>, to produce formatted reports from ADOdb SQL databases.
</p>

<p>The plugin content is parsed as a description of how to run and display a database query. If only an SQL statement (and parameters) is given, a default view of the returned data will be prepared. A report has a fairly restricted format, consisting of zero or more levels of grouping (supported by GROUP BY or ORDER BY clauses in the query's SQL) with a table generated per group. The table can have headers and footers, and links can be inserted which may take you to other web pages.
</p>

<p>Example:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox1">{DBREPORT(dsn="mysql://user:password@server/database")}
SQL { SELECT * FROM Members ORDER BY City, Postcode }
GROUP [City] "Members in [City]" :heading{text-size:150%;}
GROUP [Postcode] "Within postcode [Postcode]" :heading{text-size:120%;}
TABLE
  HEADER :heading 
    CELL :{text-align:center;} "First Names"
    CELL :{text-align:center;} "Surname"
  ROWS :even :odd &lt;"http://site.com/member.php?id=[MemberID]"&gt;
    CELL "[First Name] [Middle Name]"  
    CELL [Surname]
{DBREPORT}</pre>
<p>
</p>
<h1 class="showhide_heading" id="Report_Definition">Report Definition<a href="PluginDBReport.html#Report_Definition" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h1>
<p>A report definition is written in a simple "micro-language" that declares zero or more levels of grouping (supported by ORDER BY clauses in the query's SQL) and generates a table for each group. The tables may have headers and footers, and links can be generated for most visible elements will can take you to other web pages. If only the SQL (and parameters) are provided, a default view of the returned data will be prepared.
</p>

<p>The report generator language is designed to be very human-friendly, and tries to adhere to the 'natural language' approach of SQL which tries to avoid the use of constructs such as recursive brackets or semicolons to finish statements. Indenting and line breaks are not important, so definitions can be formatted for readability.
</p>

<p>Much of the definition can simply be omitted, and the report generator will fill in what it can. If the TABLE definition is left out, for example, then the report generator will internally generate one which has a column for each field returned by the query, and even has a header row.
</p>

<p>A general outline of a report definition looks like this:
</p>

<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox2">SQL { ... sql query ... }
  PARAM (zero or more SQL parameters)
GROUP (zero or more group breaks)
TABLE (zero or one data table)
  HEADER (zero or more header rows)
    CELL (one or more header cells)
  ROW (one or more data rows)
    CELL (one or more row cells)
  FOOTER (zero or more footer rows)
    CELL (one or more footer cells)</pre>
<p>
</p>
<a id="parameters" name="//apple_ref/cpp/Section/Parameters" class="dashAnchor"></a><h2 class="showhide_heading" id="Parameters">Parameters<a href="PluginDBReport.html#Parameters" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>{plginmanager plugin="dbreport"}
<br>Either the <code>dsn</code> or the <code>db</code> parameter should be specified, not both, since they represent alternate ways of determining how to connect to the database.
</p>

<p>This example uses a Wiki DSN to connect, and debugs the report definition.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox3">{DBREPORT(db="database" debug="true")}
  ... report definition ...
{DBREPORT}</pre>
<p>
<br>This example uses a specific DSN to connect, and is probably what you will use most often.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox4">{DBREPORT(dsn="mysql://user:password@server/database")}
  ... report definition ...
{DBREPORT}</pre>
<p>
</p>
<a id="keywords" name="//apple_ref/cpp/Section/Keywords" class="dashAnchor"></a><h2 class="showhide_heading" id="Keywords">Keywords<a href="PluginDBReport.html#Keywords" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Eight keywords are defined; <strong>SQL</strong>, <strong>PARAM</strong>, <strong>GROUP</strong>, <strong>TABLE</strong>, <strong>HEADER</strong>, <strong>ROW</strong>, <strong>FOOTER</strong>, <strong>CELL</strong>. They are case insensitive, but uppercase is encouraged for readability. Most commands take a sequence of parameters, terminated by the next keyword. Parameters come in five forms: Fields, Variables, Text, Styles, and Links
</p>
<ul><li> <strong>Fields</strong> are enclosed in <strong>[square brackets]</strong>, and denote database field names.
</li><li> <strong>Variables</strong> begin with a <strong>$dollar</strong> sign and must be followed by whitespace. They are used to pass wiki variables to the query parameters. They cannot be used to compose strings. Variables may also be enclosed in <strong>[$square brackets]</strong> (since they are very similar to fields), in which case the dollar sign must be inside the square brackets. Variables used within text must be inside square brackets in order to separate them from the rest of the text.
</li><li> <strong>Text</strong> is enclosed in <strong>"double quotes"</strong>, and denote text strings to be displayed in the report. They can include fields and variables (which will insert the value of the field into the text at that point) and be followed by style names. (to set the style of the text)
</li><li> <strong>Styles</strong> begin with a <strong>:colon</strong> and can specify the CSS 'class' and CSS 'style' parameters which are applied to HTML elements generated by the report. They can have both <strong>:class{css:style;}</strong> parts, or omit either. They denote the visual style which should be applied to the keyword or text which immediately preceeds them.
</li><li> <strong>Links</strong> are enclosed in <strong>&lt;angle brackets&gt;</strong>, and may contain Strings, Variables, and Fields which are used to compose the link's URI, and styles which are used to format the link. Just like styles, Links are applied to the text or keyword directly before them.
</li></ul><p>
</p>
<a id="sql-queries-and-parameters" name="//apple_ref/cpp/Section/SQL%20Queries%20and%C2%A0Parameters" class="dashAnchor"></a><h2 class="showhide_heading" id="SQL_Queries_and_Parameters">SQL Queries and Parameters<a href="PluginDBReport.html#SQL_Queries_and_Parameters" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>The query to be run by the database engine is defined by the SQL keyword, like so:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox5">SQL { SELECT * FROM table WHERE field1=? AND field2=? AND field3=? }
PARAM "value1"
PARAM "id" $value2
PARAM [$value3]</pre>
<p>Parameters bind values to the '?' slots in a query.
</p>
<ul><li> The first PARAM associates the literal string "value1" to the first query parameter.
</li><li> The second PARAM associates a string composed of the literal "id" concatenated with the contents of the PHP variable "value2" to the second  query parameter.
</li><li> The third PARAM associates the variable "value3" to the third query parameter. It just uses the square bracket form.
</li></ul><p>The order of the parameter statements determines which slot they are bound to.
</p>

<p>Table fields <strong>cannot</strong> be used as SQL parameters, either directly or within strings, because no data has been obtained at the time of the binding. (The query hasn't run yet!) Attempts to use strings such as "[field1]" will bind the literal text (square brackets and all) to the parameter, which is probably not what you are after.
</p>

<p>SQL statements are processed by the database server, and must adhere to it's syntax, which can vary. Some common differences between server engines are:
</p>
<ul><li> The semicolon at the end of the SQL statement may be optional or mandatory.
</li><li> Field names (especially those with special characters like spaces) may be specified differently. For example, field names are often enclosed in square brackets in Microsoft Access, but MySQL uses backtick quotes like `this`. They are rarely case sensitive.
</li><li> SQL Subqueries are supported in most engines, but not all.
</li><li> Wildcard characters for LIKE statements may be different.
</li></ul><p>
<br>SQL Queries can be placed in <strong>{curly brackets}</strong> or within <strong>"double quotes"</strong>. Only closing brackets at the 'top level' of the SQL end the statement, so curly brackets can be put in quoted string like this:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox6">SQL { SELECT "{curly}" as field1, '{brackets}' AS field2 }</pre>
<p>Double quotes were the original syntax, but it was discovered that escape sequences became unwieldy; Reporting definition strings are escaped, but so are literal strings in SQL statements. This double-escaping meant a backslash '\' within an SQL literal was encoded by <em>four</em> backslashes '\\\\' in the report definition.
</p>

<p>For example, an SQL statement that included quotes within strings like this:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox7">SQL { SELECT "back~bs~~bs~slash" AS slash, "double~bs~"quote" AS quote }</pre>
<p>Would have to be escaped as follows if using double quotes around the entire statement;
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox8">SQL " SELECT ~bs~"back~bs~~bs~~bs~~bs~slash~bs~" AS slash, ~bs~"double~bs~~bs~~bs~"quote~bs~" AS quote "</pre>
<p>Curly braces allow SQL strings to be cut-and-pasted directly into the report definition without having to escape quotes or backslashes. Double-quoted SQL is retained as a 'backup' method in case some system does actually use brackets.
</p>

<a id="variables" name="//apple_ref/cpp/Section/Variables" class="dashAnchor"></a><h2 class="showhide_heading" id="Variables">Variables<a href="PluginDBReport.html#Variables" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Variables can come from three sources, in the following order of precedence. This order is chosen so that more 'intrinsic' variables cannot be overridden by more 'external' variables, while still allowing a useful mix.
</p>
<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><em>Source</em></td><td class="wikicell"><em>Description</em></td><td class="wikicell" colspan="3"><em>Example</em></td></tr><tr><td class="wikicell"><strong>Global</strong></td><td class="wikicell">PHP Global variables which are set by the Wiki software (or other plugins) each time a page is requested.</td><td class="wikicell" colspan="3">$user</td></tr><tr><td class="wikicell"><strong>Session</strong></td><td class="wikicell">PHP Session variables persist across multiple page requests, and can be set by the wiki software, other plugins, or other PHP scripts running on a site. These variables are stored by the server.</td><td class="wikicell" colspan="3">$wysiwyg</td></tr><tr><td class="wikicell"><strong>Request</strong></td><td class="wikicell">Variables can be passed in the URL as request parameters, (or just typed into the browser's location bar by the user) or by POST data from forms.</td><td class="wikicell" colspan="3">$search</td></tr></table></dd></dl>
<p>
<br>Many global variables are provided by the Wiki system. Here are some useful ones:
</p>
<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><em>Variable</em></td><td class="wikicell"><em>Description</em></td><td class="wikicell" colspan="3"><em>Example</em></td></tr><tr><td class="wikicell"><strong>$user</strong></td><td class="wikicell">The name of the logged-in wiki user</td><td class="wikicell" colspan="3">"admin"</td></tr><tr><td class="wikicell"><strong>$group</strong></td><td class="wikicell">The wiki group that the logged in user belongs to.</td><td class="wikicell" colspan="3">"Registered"</td></tr><tr><td class="wikicell"><strong>$page</strong></td><td class="wikicell">The wiki page the report is on.</td><td class="wikicell" colspan="3">"PluginDBReport"</td></tr><tr><td class="wikicell"><strong>$tiki_p_admin</strong></td><td class="wikicell">Whether the current user is a wiki administrator.</td><td class="wikicell" colspan="3">"1"</td></tr></table></dd></dl>
<p>
</p>
<a id="report-groups" name="//apple_ref/cpp/Section/Report%20Groups" class="dashAnchor"></a><h2 class="showhide_heading" id="Report_Groups"> Report Groups<a href="PluginDBReport.html#Report_Groups" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Grouping (also called "Section Breaks" in other reporting systems) can be done based on one or more fields, and text may be generated for the title of each grouped section. Several levels of grouping can be done, each on many fields, but this really only affects the visual appearance of the report. Here are some examples:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox9">GROUP [city] [state] "City of [city] in [state]"</pre>
<p>Produces one group per unique combination of city and state. The order of the fields is irrelevant, but make sure they come first. Any fields specified after the text will be interpreted as part of the text. For multi-level display, something like this:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox10">GROUP [state] "State: [state]":h1
GROUP [city] "City: [city]":h2</pre>
<p>
<br>Will produce two levels of grouping, showing a list of cities within each state group. Styles are applied to differentiate the levels.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox11">GROUP [city]</pre>
<p>Would create one level of grouping without any text heading, but will also put records from cities of the same name (but in different states) into the same group.
</p>

<a id="data-tables" name="//apple_ref/cpp/Section/Data%20Tables" class="dashAnchor"></a><h2 class="showhide_heading" id="Data_Tables">Data Tables<a href="PluginDBReport.html#Data_Tables" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>For each unique group, a table is generated that will contain at least one record. (Otherwise the group would not be created by the data) This table can be given a style.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox12">TABLE :style</pre>
<p>The table may also have headers and footers, which can be used to title columns or to show group totals. Fields can be used, not just text. The header will be generated using the same record as first row of the table, and the footer using the last record.
<br>The HEADER and FOOTER and ROW keyword can be followed by one or more styles, although this is really only useful for ROW in which case the styles will be used in 'round robin' order for successive database records, which is useful for visually delineating records. This example has alternating white/grey rows for the records:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox13">TABLE
  HEADER :black_row 
    CELL "First Field" :white_text 
    CELL "Second Field":white_text
  ROW :grey_row :white_row 
    CELL "[field4]"
    CELL "[field5]"
  FOOTER
    CELL "Total" 
    CELL "[sum_field]"</pre>
<p>
<br>Multiple Header, Footer and Row 'lines' can be specified by simply adding more keywords. Cells can also span rows and columns by specifying ROWSPAN and COLSPAN keywords followed by a single number after the CELL keyword. You can also use the SPAN keyword instead of COLSPAN for rows. (And instead of ROWSPAN for Columns if they are ever implemented)
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox14">SQL "SELECT * FROM Categories"
  TABLE
    HEADER 
      CELL SPAN 3 :heading "Categories"
    ROW 
      CELL :heading "id:"
      CELL :heading [CatID]
      CELL ROWSPAN 2 :heading "]"
    ROW 
      CELL SPAN 2 [Category]</pre>
<p>
<br>Spans work the same was as in HTML tables, (since that is how the data tables are ultimately generated) and can produce some quite unexpected results if you get the spans just a little wrong. Refer to a good HTML coding manual for details on how spans work. Remember that spanning cells move other cells 'out of the way' and do not replace them.
</p>

<a id="styles-and-formatting" name="//apple_ref/cpp/Section/Styles%20and%C2%A0Formatting" class="dashAnchor"></a><h2 class="showhide_heading" id="Styles_and_Formatting">Styles and Formatting<a href="PluginDBReport.html#Styles_and_Formatting" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Styles can be specified in two parts, which relates to the way HTML "style sheets" work. HTML elements can be given a "class", in which case their style information is found by looking in active stylesheets, and they can have "inline" style information (such as colours, borders, and margins) specified directly. Classes are the preferred method, since HTML pages are composed of hundreds (or thousands) of "tags" and having a short name attached to each is more efficient than having long strings of style information repeated over and over again, and the visual style of the page can be changed by using a different style sheet rather than re-writing all the HTML tags.
</p>

<h3 class="showhide_heading" id="Style_Syntax">Style Syntax<a href="PluginDBReport.html#Style_Syntax" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>Style definitions in reports always begin with a ':' colon immediately followed (with no intervening whitespace) by a name which corresponds to a CSS class, and/or a string in {curly braces} which is used as inline style information. You can have whitespace inside the braces, but it's discouraged because it makes the code harder to read, and will also appear in the HTML.
</p>

<p>The following example shows a useful mixture of inline style information on the GROUP and TABLE, and style classes used for the ROW and CELL definitions that will generate efficient pages.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox15">GROUP :{border-top:1px;border-bottom:1px;}
  TABLE :{margin-top:1em;margin-bottom:1em;margin-left:2em;margin-right:2em;}
    HEADER :heading 
      CELL :{text-align:center} "Field 1" :{color:blue;}
      CELL :{text-align:center} "Field 2" :{color:red;} 
    ROW :odd :even
      CELL [Field1]
      CELL [Field2]</pre>
<p>Remember that a GROUP with no actual fields or text will still produce a 'DIV' element in the output HTML which can be used to advantage, as in the example above.
</p>

<h3 class="showhide_heading" id="Report_Keywords_and_HTML_Elements">Report Keywords and HTML Elements<a href="PluginDBReport.html#Report_Keywords_and_HTML_Elements" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>When using Cascading Style Sheets, it can be important to know how the various parts of the report are rendered into HTML, so that you know which "tag class" will be used for which report elements. The following table lists the translations;
</p>
<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>Report Element</strong></td><td class="wikicell" colspan="4"><strong>HTML Tag</strong></td></tr><tr><td class="wikicell">GROUP</td><td class="wikicell" colspan="4">DIV</td></tr><tr><td class="wikicell">TABLE</td><td class="wikicell" colspan="4">TABLE</td></tr><tr><td class="wikicell">HEADER</td><td class="wikicell" colspan="4">TH</td></tr><tr><td class="wikicell">FOOTER</td><td class="wikicell" colspan="4">TH</td></tr><tr><td class="wikicell">ROW</td><td class="wikicell" colspan="4">TR</td></tr><tr><td class="wikicell">CELL</td><td class="wikicell" colspan="4">TD</td></tr><tr><td class="wikicell">Text</td><td class="wikicell" colspan="4">SPAN</td></tr></table></dd></dl>
<p>Generally you should try to use style <em>classes</em> for ROW and CELL elements, as many of them will be generated for an average report. However, it's fine to specify <em>inline CSS</em> for the GROUP, TABLE, HEADERs and FOOTERs since relatively few of them are generated, and they tend to be the elements you want to control most with alignment, borders, and margins.
</p>

<h3 class="showhide_heading" id="Special_Classes">Special Classes<a href="PluginDBReport.html#Special_Classes" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>Nine style class names are treated specially when applied to Text, Fields and Variables. Instead of creating a text &lt;span&gt; HTML element, they generate the named tag. These special classes do not apply to TABLE, GROUP, ROW, CELL, or Links keywords, since they must generate their own special tags.
</p>

<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>Style</strong></td><td class="wikicell" colspan="4"><strong>Generated HTML</strong></td></tr><tr><td class="wikicell"><strong>:b</strong></td><td class="wikicell" colspan="4">&lt;b&gt; Bold tag</td></tr><tr><td class="wikicell"><strong>:i</strong></td><td class="wikicell" colspan="4">&lt;i&gt; Italic tag</td></tr><tr><td class="wikicell"><strong>:u</strong></td><td class="wikicell" colspan="4">&lt;u&gt; Underline tag</td></tr><tr><td class="wikicell"><strong>:h1</strong></td><td class="wikicell" colspan="4">&lt;h1&gt; Heading 1 tag</td></tr><tr><td class="wikicell"><strong>:h2</strong></td><td class="wikicell" colspan="4">&lt;h2&gt; Heading 2 tag</td></tr><tr><td class="wikicell"><strong>:h3</strong></td><td class="wikicell" colspan="4">&lt;h3&gt; Heading 3 tag</td></tr><tr><td class="wikicell"><strong>:h4</strong></td><td class="wikicell" colspan="4">&lt;h4&gt; Heading 4 tag</td></tr><tr><td class="wikicell"><strong>:h5</strong></td><td class="wikicell" colspan="4">&lt;h5&gt; Heading 5 tag</td></tr><tr><td class="wikicell"><strong>:h6</strong></td><td class="wikicell" colspan="4">&lt;h6&gt; Heading 6 tag</td></tr></table></dd></dl>
<p>You can also specify inline style for any of these classes, which is especially useful for the heading tags. This example turns the text into a level 1 heading, but also controls the leading margin.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox16">"Heading Text" :h1{margin-top:6px;}</pre>
<p>However, this syntax does not allow you to set a class for the tag, only inline style. This is a limitation, but not a large one... if you have enough control over the stylesheet to declare heading tags with specific style classes, then you can just define new classes with the full style you want.
</p>

<h3 class="showhide_heading" id="Computed_Style_Names">Computed Style Names<a href="PluginDBReport.html#Computed_Style_Names" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>Style classes and inline CSS don't have to be static strings. You can use variables or database fields to compose the style names. Indeed, you can use quite complicated SQL statements to determine what style to apply to individual rows.
</p>

<p>The following example shows a variety of styles composed from variables and fields;
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox17">SQL { SELECT 'h3' as style1, 
             'b' as style2, 
             'caption' as style3, 
             'font-weight:bold;' as style4,
             '2' as level }
TABLE
  ROW 
    CELL "URL Style" :[$url-style]
    CELL "Field Style 1"  :[style1]
    CELL "Field Style 2"  :[style2]
    CELL "Field Style 3"  :[style3]
    CELL "Field Style 4"  :{[style4]}
    CELL "Heading"  :h[level]</pre>
<p>Note that variables (from sources such as URL parameters) have to be enclosed in [square brackets] in the same way as within text strings.
</p>

<h3 class="showhide_heading" id="Multiple_Classes">Multiple Classes<a href="PluginDBReport.html#Multiple_Classes" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>If you absolutely have to, you can specify multiple classes for an element by using an 'escaped space' (a space preceded by a single backslash) between the class names, which will translate through to the HTML attribute as a normal space;
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox18">"Dual" :class1\ class2</pre>
<p>Multiple classes are rarely used, but are legal CSS, and can be useful. They allow several 'subsets' of classes (perhaps one group that sets alignments, another group that sets colours, and a third which sets whitespace breaking) to be combined on a per-tag basis, rather than having to create style classes for every possible combination.
</p>

<p>They could even be used with computed styles to allow very tight control over field formatting, eg:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox19">CELL [text] :[align]\ [color]\ [whitespace]{text-weight:[weight];}</pre>
<a id="web-links" name="//apple_ref/cpp/Section/Web%20Links" class="dashAnchor"></a><h2 class="showhide_heading" id="Web_Links">Web Links<a href="PluginDBReport.html#Web_Links" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Content in &lt;angle brackets&gt; after a GROUP, HEADER, FOOTER, ROW, CELL or Text generates a hyperlink. The link can include fields and variables and even have a style.
</p>

<p>A common case is when you want to be able to click on a record and be taken to a detail page (or editor page) for that entry. The entire URL must be provided if you want an absolute link, (ie; starting with "http://") otherwise it will be interpreted by the browser as a relative link from the location of the current page, and will be appended to the current URL path by the browser in the normal way. For example: This would take you to the relevant page on another site when the group's title text was clicked;
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox20">GROUP [state] [city] "[city] [state]" &lt;"http://site.com/"[state]"/"[city]".html"&gt;</pre>
<p>
<br>But the following code would take you to a relative page on the same server when the record's row was clicked.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox21">TABLE
  ROWS :grey_row :white_row &lt;"database/details.php?id="[field4]&gt;
    CELL "[field4]"
    CELL "[field5]"</pre>
<p>
<br>In the following example, two links are used to manage each entry, in addition to the table row link. Note that the final link would enclose the "delete" text, but not the separating " ";
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox22">TABLE
  ROWS :grey_row :white_row &lt;"database/details.php?id="[field4]:row_link&gt;
    CELL "[field4]"
    CELL "[field5]"
    CELL 
      "\[edit\]":normal &lt;"edit.php?id="[field4]&gt;
      " "
      "\[delete\]":normal &lt;"delete.php?id="[field4]&gt;</pre>
<p>
<br>Also note that the link style will be superseded by any CSS properties of the text style "normal" because of the order in which links and style are applied to text. Links wrap around text, which may have formatting.
</p>

<p>Links may have multiple segments of text, with fields inside or outside the quotes. Multiple styles may be specified, but only the last one is applied. For example, the following Links are all equivalent:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox23">&lt;"edit.php?id="[field4] :link_style&gt;
&lt; :link_style "edit.php?id=" [field4] &gt;
&lt;"edit.php" :ignored_style "?id=" [field4] :link_style&gt;</pre>
<p>The first example is the recommended form, because it is most clear that the style always applies to the whole link, and not just parts of it.
</p>

<h3 class="showhide_heading" id="URL_Encoding"> URL Encoding<a href="PluginDBReport.html#URL_Encoding" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>One subtle issue to note is the concept of URL encoding; some characters are not allowed in URLs, such as spaces. Other characters such as question marks, ampersands, plus and equals signs, and colons have special meanings. When building a URL from database fields you need to take care that the special characters are encoded appropriately.
</p>

<p>This is most important for text fields that might contain these special characters, but not so much for numeric fields, which end up with the same encoding whichever way you do it.
</p>

<p>Imagine you want to create links from database entries to search engines. The database table contains three fields, [Title], [Engine] and [Find]. You want to display the [Title] field in the report, and when you click on it you want to perform a search in some [Engine] for the [Find] term. Here's what the table could contain;
</p>

<table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>Title</strong></td><td class="wikicell"><strong>Engine</strong></td><td class="wikicell" colspan="3"><strong>Find</strong></td></tr><tr><td class="wikicell">Simple Google</td><td class="wikicell">http://www.google.com/search?q=</td><td class="wikicell" colspan="3">Simple Search</td></tr><tr><td class="wikicell">Simple Yahoo</td><td class="wikicell">http://au.search.yahoo.com/search?p=</td><td class="wikicell" colspan="3">Simple Search</td></tr><tr><td class="wikicell">Complex Google</td><td class="wikicell">http://www.google.com/search?q=</td><td class="wikicell" colspan="3">Long &amp; Complex search?</td></tr><tr><td class="wikicell">Complex Yahoo</td><td class="wikicell">http://au.search.yahoo.com/search?p=</td><td class="wikicell" colspan="3">http://www.google.com/search?q=</td></tr></table>
<p>
<br>Note the final two entries in particular, which although weird, represent perfectly legal searches. The correct report code for this example is:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox24">SQL "SELECT Title, Engine, Find FROM Searches"
TABLE
  ROW
    CELL [Title] &lt;"[Engine]"[Find]&gt;</pre>
<p>
<br>Note how the [Engine] field is inside a pair of double quotes, while the [Find] field is not. This tells the report generator that the [Engine] field is not to be encoded, to be used "as-is". On the other hand, the [Find] field is to be URLEncoded, otherwise special characters will mess up the URL. The URLs generated for these examples will be as follows:
</p>
<table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>Title</strong></td><td class="wikicell" colspan="4"><strong>Generated Link URL</strong></td></tr><tr><td class="wikicell">Simple Google</td><td class="wikicell" colspan="4">http://www.google.com/search?q=Simple+Search</td></tr><tr><td class="wikicell">Simple Yahoo</td><td class="wikicell" colspan="4">http://au.search.yahoo.com/search?p=Simple+Search</td></tr><tr><td class="wikicell">Complex Google</td><td class="wikicell" colspan="4">http://www.google.com/search?q=Long+%26+Complex+search%3F</td></tr><tr><td class="wikicell">Complex Yahoo</td><td class="wikicell" colspan="4">http://au.search.yahoo.com/search?p=http%3A%2F%2Fwww.google.com/search%3Fq%3D</td></tr></table>
<p>
<br>Here is what would happen to the 'Complex Google' link for all the other (wrong) ways of doing it:
</p>
<table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>Bad Link Code</strong></td><td class="wikicell"><strong>Generated Link URL</strong></td><td class="wikicell" colspan="3"><strong>Notes</strong></td></tr><tr><td class="wikicell">&lt;"[Engine][Find]"&gt;</td><td class="wikicell" colspan="4">http://www.google.com/search?q=Long &amp; Complex search?</td></tr><tr><td class="wikicell" colspan="5">The [Find] field has not been encoded. The ampersand in the search term will truncate the "q=" parameter.</td></tr><tr><td class="wikicell">&lt;[Engine]"[Find]"&gt;</td><td class="wikicell" colspan="4">http%3A%2F%2Fwww.google.com/search%3Fq%3DLong &amp; Complex search?</td></tr><tr><td class="wikicell" colspan="5">The [Engine] field was encoded messing up the "http://" and "?q=" parts, while not encoding the [Search] field. This is an invalid URL.</td></tr><tr><td class="wikicell">&lt;[Engine][Find]&gt;</td><td class="wikicell" colspan="4">http%3A%2F%2Fwww.google.com/search%3Fq%3DLong+%26+Complex+search%3F</td></tr><tr><td class="wikicell" colspan="5">Both parts are encoded, creating a valid relative URL to a page that does not exist</td></tr></table>
<p>
<br>The first link would mostly work, but would only end up searching google for "Long", because ampersands indicate the beginning of the next parameter. The second link is completely messed up. The final link would be treated by the browser as a 'relative link' to a page within the site, ie, it would attempt to jump to a page like "http://your.site.com/wiki/http%3A%2F%2Fwww.google.com..." because the "http://" at the beginning has been encoded. This page would almost certainly not exist, and you would get a "Not Found" error.
</p>

<p>So in conclusion, put fields into quoted strings when you want the field used 'as is' with no encoding, such as for complete URLs stored in a database. But in cases where you compose a URL that contains parameters, leave the parameter fields outside of the quotation marks so they are encoded.
</p>

<h3 class="showhide_heading" id="Useful_Link_Styles"> Useful Link Styles<a href="PluginDBReport.html#Useful_Link_Styles" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h3>
<p>It can sometimes be distracting to have every link in a table underlined, so don't forget about the "text-decoration" CSS property which can be set to "none".
</p>

<p>When creating clickable cells and rows, it's often useful to choose a CSS class that incorporates a 'hover' style and which changes the mouse pointer so that the users have some visual feedback. (Otherwise they won't necessarily know that the row is clickable unless they actually try it.) TikiWiki's 'odd' and 'even' row classes (usually) change the color of the row the user is hovering over, but should be extended to set the mouse pointer as in the following example;
</p>

<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox25">{DBREPORT(db="tiwi1")}
  SQL "SELECT * FROM tiki_preferences"
  TABLE 
    HEADER :heading
      CELL "name"
      CELL "value"
    ROW :even{cursor:pointer;} :odd{cursor:pointer;} &lt;"http://www.google.com/search?q="[name]&gt;
      CELL [name] 
      CELL [value] &lt;"http://www.google.com/search?q="[name]:{display:block;text-decoration:none;}&gt;
{DBREPORT}</pre>
<p>
<br>When putting links into table cells, if the link  text is going to be the only content in the cell then you can use CSS to 'expand' it so that it occupies the entire cell, by setting the "display" property to "block". This has some slight advantages over making the table cell itself clickable. Namely, the cell remains a 'normal' hyperlink.
</p>

<p>Let's change the above example so that each cell becomes clickable rather than the whole row;
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox26">{DBREPORT(db="tiwi1")}
  SQL "SELECT * FROM tiki_preferences"
  TABLE 
    HEADER :heading
      CELL "name"
      CELL "value"
    ROW :even :odd
      CELL :{cursor:pointer;} &lt;"http://www.google.com/search?q="[name]&gt; [name] 
      CELL [value] &lt;"http://www.google.com/search?q="[value]:{display:block;}&gt;
{DBREPORT}</pre>
<p>
<br>We format the [name] so that the entire cell becomes a link. The HTML that the report generator creates must use an 'onclick' event for the CELL elements rather than an anchor tag, (this is a shortcoming in HTML) so we need to set the style to explicitly change the mouse pointer for user feedback. The text stays black, and hovering over the cell does not show the link destination in the status bar of the browser.
</p>

<p>The [value] cell instead wraps a normal hyperlink around the text content. The text is coloured blue, gets an underline. But in normal circumstances the link would be confined to just the text, which could be a problem if the text content was an empty string, but we still wanted to click on it. (This is actually quite common with tables generated out of a database) This is why we want to use CSS to 'display' the link as a 'block', which causes it to expand to fill the entire cell.
</p>
<a id="examples" name="//apple_ref/cpp/Section/Examples" class="dashAnchor"></a><h2 class="showhide_heading" id="Examples">Examples<a href="PluginDBReport.html#Examples" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Finally, here is a complicated example that shows nearly every feature in use simultaneously, and in all their legal forms. (Unreal names are used for clarity)
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox27">{REPORT( 'dsn'=&gt;'mysql://user:password@server/database' )}
SQL { SELECT * FROM table WHERE field1=? AND field2=? }
  PARAM "0001"
  PARAM $user
GROUP [field1] "Level 1 [field1]":{font-size:150%;} &lt;"group.php?id="[field1]&gt; 
GROUP [field2] [field3] "Level 2 [field2] [field3]":{font-size:120%;} 
TABLE :table_style
  HEADER :heading
    CELL "First Field"
    CELL "Second Field"
  ROWS :even{cursor:pointer;} :odd{cursor:pointer;} &lt;"record.php?id="[field4]&gt; 
    CELL "[field4]"
    CELL "[field5]"
  FOOTER :row_style 
    CELL "Total" :{font-weight:bold;}
    CELL "[sum_field]"
{REPORT}</pre>
<p>
<br>The following example is a real report in use on the author's wiki site. The current wiki user determines what records are visible. Notice that the SQL code is actually slightly longer than the display definition, and more complicated.
<br>{CODE(colors="tiki")}{DBREPORT(db="members")}
<br>  SQL {
<br>    SELECT
<br>      Members.MemID,
<br>      CONCAT_WS(' ', Members.FirstName, Members.Surname) AS Name,
<br>      CONCAT_WS(' ', Members.Address1, Members.Address2) AS Address,
<br>      Members.`Suburb or City`,
<br>      Members.State,
<br>      Members.PostCode,
<br>      Members.`Hub Postcode`,
<br>      Members.Phone,
<br>      Members.Mobile,
<br>      Members.Email,
<br>      Members.Status,
<br>      Postcodes.Hub,
<br>      Members.Experience,
<br>      Categories.Category,
<br>      FeesPaid.PayDate
<br>    FROM Members INNER JOIN Postcodes INNER JOIN (
<br>      SELECT
<br>        MembersFeesRecord.MemID,
<br>        Max(MembersFeesRecord.FeeID) AS FeeID,
<br>        Max(MembersFeesRecord.DatePd) AS PayDate
<br>      FROM MembersFeesRecord
<br>      GROUP BY MembersFeesRecord.MemID
<br>      ) AS FeesPaid INNER JOIN Categories
<br>      ON Postcodes.Postcode = Members.`Hub Postcode`
<br>         AND Members.CatID = Categories.CatID
<br>         AND FeesPaid.MemID = Members.MemID
<br>      WHERE
<br>        Members.Status='Yes'
<br>        AND Postcodes.Abbrev = (
<br>          SELECT Abbrev
<br>          FROM Postcodes INNER JOIN Members
<br>          ON Postcodes.Postcode = Members.`Hub Postcode`
<br>          WHERE CONCAT('bsol',MemID) = ?
<br>        )
<br>    ORDER BY Members.MemID;
<br>  }
<br>  PARAM $user
<br>  TABLE
<br>    HEADER
<br>      CELL :heading ROWSPAN 2 "ID"
<br>      CELL :heading ROWSPAN 2 "Name"
<br>      CELL :heading ROWSPAN 2 "Category"
<br>      CELL :heading ROWSPAN 2 "Address"
<br>      CELL :heading "Phone"
<br>      CELL :heading "Mobile"
<br>      CELL :heading "Email"
<br>      CELL :heading "Paid"
<br>    HEADER
<br>      CELL :heading COLSPAN 4 "Comments"
<br>    ROW
<br>      CELL :heading ROWSPAN 2 <a class="wiki" href="http://doc.tiki.org/MemID" rel="">MemID</a>
<br>      CELL ROWSPAN 2 <a class="wiki" href="http://doc.tiki.org/Name" rel="">Name</a>
<br>      CELL ROWSPAN 2 <a class="wiki" href="http://doc.tiki.org/Category" rel="">Category</a>
<br>      CELL ROWSPAN 2 "<a class="wiki" href="http://doc.tiki.org/Address" rel="">Address</a> <a class="wiki" href="http://doc.tiki.org/Suburb%20or%20City" rel="">Suburb or City</a> <a class="wiki" href="http://doc.tiki.org/State" rel="">State</a> <a class="wiki" href="http://doc.tiki.org/PostCode" rel="">PostCode</a>"
<br>      CELL :{white-space:nowrap;} <a class="wiki" href="http://doc.tiki.org/Phone" rel="">Phone</a>
<br>      CELL :{white-space:nowrap;} <a class="wiki" href="http://doc.tiki.org/Mobile" rel="">Mobile</a>
<br>      CELL :{white-space:nowrap;} <a class="wiki" href="http://doc.tiki.org/Email" rel="">Email</a>
<br>      CELL :{white-space:nowrap;} <a class="wiki" href="http://doc.tiki.org/PayDate" rel="">PayDate</a>
<br>    ROW
<br>      CELL :{color:#404060;vertical-align:top;width:50%;} SPAN 4 <a class="wiki" href="http://doc.tiki.org/Experience" rel="">Experience</a>
<br>{REPORT}
<br>{CODE}
</p>
<h1 class="showhide_heading" id="Developing_a_Report">Developing a Report<a href="PluginDBReport.html#Developing_a_Report" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h1>
<p>There are two major parts to developing a report;
</p>
<ul><li> Writing the SQL query which retrieves the records from the database.
</li><li> Writing the report definition which displays the records.
</li></ul><p>It's usually best to develop the SQL query first, and then think about the best way of arranging it on the screen later, once you can actually see some example data.
</p>

<a id="developing-the-sql" name="//apple_ref/cpp/Section/Developing%20the%C2%A0SQL" class="dashAnchor"></a><h2 class="showhide_heading" id="Developing_the_SQL">Developing the SQL<a href="PluginDBReport.html#Developing_the_SQL" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>The hardest part will probably be developing the SQL query. Most of the examples given have been simple "SELECT * FROM tablename" queries, but many real-world cases are quite complicated with multiple INNER JOINs, ON, WHERE, GROUP BY and ORDER BY clauses, concatenation of fields, and more. The SQL statement can easily be longer than the rest of the report definition.
</p>

<p>For performance reasons, it's best to only retrieve the fields that you intend to use in the report.
</p>

<p>While you can develop the SQL directly in the Wiki page editor, it may be better to do it with a proper database front-end, (Such as Microsoft Access, or phpMyAdmin) since it's likely to provide more help and better error messages. Once the query is working properly, just copy-and paste it into the report definition, but be careful of the following:
</p>
<ul><li> The query shouldn't contain any "double quoted" strings, because they will be interpreted as the closing quotes for SQL report keyword. The SQL specification encourages the use of 'single quotes' for the purpose of string in queries, but double-quotes are allowed. If you have to use double-quotes, (say, if you are composing a text string that must contain quotes for output) then prefix them with the '\' escape character.
</li><li> Be aware of the '\' escape character, which is used to prefix any characters like quotes, and itself, which sometimes need to be treated literally rather than syntactically.
</li><li> Some query designers (most notably Microsoft Access) do not generate standard SQL, but their own special variant. For example, Microsoft Access uses [square brackets] to surround field names that contain spaces, and these need to be converted to `backticks`. (also called `backquotes`, usually the top-left button on the keyboard)
</li></ul><p>
</p>
<a id="developing-the-display-definition" name="//apple_ref/cpp/Section/Developing%20the%20Display%C2%A0Definition" class="dashAnchor"></a><h2 class="showhide_heading" id="Developing_the_Display_Definition">Developing the Display Definition<a href="PluginDBReport.html#Developing_the_Display_Definition" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>You do not actually have to specify a TABLE part of the report definition, in which case a simple 'default' table will be generated which has each field in it's own column, in the order that they come from the query. You can use this in combination with the <strong>debug</strong> parameter to the plugin to see the code for the TABLE section that the report generator creates from the data. For example, if we were to write the following Wiki code:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox28">{DBREPORT(db="members" debug="true")}
  SQL "Select FirstName, MiddleNames, Surname FROM People"
{DBREPORT}</pre>
<p>
<br>Then the report generator would, at the top of the report, give us back a report definition like this:
</p>

<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox29">SQL "Select FirstName, MiddleNames, Surname FROM People"
  TABLE
    HEADER :heading
      CELL "FirstName"
      CELL "MiddleNames"
      CELL "Surname"
    ROW :even :odd
      CELL [FirstName]
      CELL [MiddleNames]
      CELL [Surname]</pre>
<p>
<br>You could then copy-and-paste this definition back into the original, and use it as a starting point to re-arrange the fields, change the heading names or formatting, etc.
</p>

<a id="concatenating-fields-into-text-strings" name="//apple_ref/cpp/Section/Concatenating%20Fields%20into%20Text%C2%A0Strings" class="dashAnchor"></a><h2 class="showhide_heading" id="Concatenating_Fields_into_Text_Strings">Concatenating Fields into Text Strings<a href="PluginDBReport.html#Concatenating_Fields_into_Text_Strings" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h2>
<p>Concatenating fields together for display can either be done in the SQL query, (Using a statement like "CONCAT(field1,field2) AS NewFieldName") or in the display part of the definition. (Using a Text string like "[Field1] [Field2]") and there are some subtleties you should be aware of, mostly to do with the whitespace between fields, and the behavior of the SQL CONCAT function, when fields have null values.
</p>

<p>For example, consider the common case where you need to concatenate a person's name out of three seperate fields; FirstName, MiddleNames, and Surname. Many people may not have any middle names, in which case this field could be NULL. We will also consider cases where the FirstName is also NULL, for various reasons. (This is more common than you think)
</p>

<p>Imagine we want, for each person, a line on the report that gives their full name followed by a full stop.
</p>

<p>Now consider the following three examples:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox30">{DBREPORT(db="members")}
  SQL "SELECT CONCAT(FirstName,' ',MiddleNames,' ',Surname,'.') AS Name
         FROM People"
  TABLE ROW
    CELL "[Name]"
{DBREPORT}</pre>
<p>This looks right, but you need to know that the SQL CONCAT statement is defined to return NULL <em>if any of it's parameters are NULL</em>. So in cases where the person has no middle name, their entire name will come out blank! Not what we want at all! Although there are cases where this behavior is preferable, such as when adding prefix or suffix strings to a field, (like a dollar sign to money fields) and we want the entire field to remain blank if the involved field is null.
</p>

<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox31">{DBREPORT(db="members")}
  SQL "SELECT FirstName, MiddleNames, Surname FROM People"
  TABLE ROW
    CELL "[FirstName]_[MiddleNames]_[Surname]."
{DBREPORT}</pre>
<p>This is better, and we will see records for people who have NULL fields. However, we will also have some slight visual issues with extra spaces around fields that may have NULL values. Examine the following table of result fields and the concatenated string, where spaces in the output are represented with underscores:
</p>
<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>FirstName</strong></td><td class="wikicell"><strong>MiddleNames</strong></td><td class="wikicell"><strong>Surname</strong></td><td class="wikicell" colspan="2"><strong>Output Text</strong></td></tr><tr><td class="wikicell">John</td><td class="wikicell">Qubert</td><td class="wikicell">Public</td><td class="wikicell" colspan="2">John_Qubert_Public.</td></tr><tr><td class="wikicell">Ronnie</td><td class="wikicell">NULL</td><td class="wikicell">Corbett</td><td class="wikicell" colspan="2">Ronnie__Corbett.</td></tr><tr><td class="wikicell">Ronnie</td><td class="wikicell">Barker</td><td class="wikicell">NULL</td><td class="wikicell" colspan="2">Ronnie_Barker_.</td></tr><tr><td class="wikicell">Nobody</td><td class="wikicell">NULL</td><td class="wikicell">NULL</td><td class="wikicell" colspan="2">Nobody__.</td></tr></table></dd></dl>
<p>Note how the spaces (represented as underscores) persist, even when some fields are null. In many cases this won't even be noticed, because extra whitespace in HTML pages is 'parsed away' by the browser, but this can lead to some interesting visual 'quirks', such as the last entry where a space will be visible between the "Nobody" and the trailing full stop. This issue becomes much more obvious if we were to use actual underscores, or other visible characters.
</p>

<p>To get perfect output, with no extra spaces, we instead should use the SQL CONCAT_WS function, like so:
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox32">{DBREPORT(db="members")}
  SQL "SELECT CONCAT_WS(' ',FirstName,MiddleNames,Surname) AS Name 
         FROM People"
  TABLE ROW
    CELL "[Name]."
{DBREPORT}</pre>
<p>CONCAT_WS (WS stands for "with separators") works slightly differently from CONCAT, in that the first parameter is used as the separator to use between fields, and NULL fields are skipped during the concatenation process. The text that is produced for our example data now looks like this:
</p>
<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>FirstName</strong></td><td class="wikicell"><strong>MiddleNames</strong></td><td class="wikicell"><strong>Surname</strong></td><td class="wikicell" colspan="2"><strong>Output Text</strong></td></tr><tr><td class="wikicell">John</td><td class="wikicell">Qubert</td><td class="wikicell">Public</td><td class="wikicell" colspan="2">John_Qubert_Public.</td></tr><tr><td class="wikicell">Ronnie</td><td class="wikicell">NULL</td><td class="wikicell">Corbett</td><td class="wikicell" colspan="2">Ronnie_Corbett.</td></tr><tr><td class="wikicell">Ronnie</td><td class="wikicell">Barker</td><td class="wikicell">NULL</td><td class="wikicell" colspan="2">Ronnie_Barker.</td></tr><tr><td class="wikicell">Nobody</td><td class="wikicell">NULL</td><td class="wikicell">NULL</td><td class="wikicell" colspan="2">Nobody.</td></tr></table>Finally this looks correct.</dd></dl>
<p>
<br>Nearly any effect can be produced with appropriate use of each of these techniques. Here is a more complicated example that composes an likely e-mail address for people based on their names and a 'server' field.
</p>
<pre class="codelisting" data-theme="off" data-syntax="tiki" data-wrap="1" dir="ltr" style="white-space:pre-wrap; overflow-wrap: break-word; word-wrap: break-word;" id="codebox33">{DBREPORT(db="members")}
 SQL "SELECT CONCAT(CONCAT_WS('_',FirstName,MiddleNames,Surname),'@',Server) AS Email
        FROM People"
 TABLE ROW
   CELL "[Email]"
{DBREPORT}</pre>
<p>And here is what would be produced, given some example data:
</p>
<dl><dt></dt><dd><table class="wikitable table table-striped table-hover"><tr><td class="wikicell"><strong>FirstName</strong></td><td class="wikicell"><strong>MiddleNames</strong></td><td class="wikicell"><strong>Surname</strong></td><td class="wikicell"><strong>Server</strong></td><td class="wikicell"><strong>Output Text</strong></td></tr><tr><td class="wikicell">John</td><td class="wikicell">Qubert</td><td class="wikicell">Public</td><td class="wikicell">NULL</td><td class="wikicell"></td></tr><tr><td class="wikicell">Ronnie</td><td class="wikicell">NULL</td><td class="wikicell">Corbett</td><td class="wikicell">google.com</td><td class="wikicell">Ronnie_Corbett@google.com</td></tr><tr><td class="wikicell">Ronnie</td><td class="wikicell">Barker</td><td class="wikicell">NULL</td><td class="wikicell">msn.com</td><td class="wikicell">Ronnie_Barker@msn.com</td></tr><tr><td class="wikicell">Nobody</td><td class="wikicell">NULL</td><td class="wikicell">NULL</td><td class="wikicell">yahoo.com</td><td class="wikicell">Nobody@yahoo.com</td></tr></table></dd></dl>
<p>Note how there are never extra underscore characters where they're not needed to separate names, and how the entire string is blank in cases where there is no Server.
</p>

<h1 class="showhide_heading" id="Security">Security<a href="PluginDBReport.html#Security" class="heading-link"><span class="icon icon-link fas fa-link "></span></a></h1>
<p>When used correctly, security is quite good. Parameterized queries ensure that <a class="wiki external" target="_blank" href="http://xkcd.com/327/" rel="external">badly formed SQL</a> due to funny requests can't happen.
</p>

<p>However, since this extension passes SQL strings to the database, hacks are possible such as malicious users changing the query to "DROP TABLE *" or worse, if they can edit the report definition.
</p>
<ul><li> Make sure pages with reports have their permissions set properly, so that general users of the page do not have edit privileges. If you can edit the page, you can change the query, or copy the report to another page and hack the query there.
</li><li> You could use a Wiki DSN (setup using the DSN Administrator, and specified using the "db=&gt;" parameter to the plugin rather than a "dsn=&gt;" string) instead of specifying the full connection string. This way, even if the page's permissions are incorrectly set, the DSN permissions will prevent unauthorized users from running the report, or from seeing how to connect to the database using other software. However, users authorized to access the DSN can write a new page with a report, and do anything the database allows, so you must trust them entirely.
</li><li> The most secure method is therefore to specify an entire DSN on each use of the report plugin, and then lock down the permissions so that authorized users can only view the page. That means that database reports will probably inhabit their own pages, and cannot be mixed with generally editable wiki content.
</li></ul><p></p>

					</div>

		
			</article> 

	
	<footer class="form-text">
		
					<div class="wiki-authors">
<hr>
	Created by <a title="User Information" href="http://doc.tiki.org/user10830" class="userlink ajaxtips" data-ajaxtips="tiki-user-info?username=UnorthodoxJeremy">UnorthodoxJeremy</a>.
	Last Modification: Saturday 03 August, 2019 07:26:41 GMT-0000 by <a title="User Information" href="http://doc.tiki.org/user12449" class="userlink ajaxtips" data-ajaxtips="tiki-user-info?username=yves.dax">Yves Kipondo</a>.
	
	</div>		
		
			</footer>

		
							
		
	
			
	
	

<a id="attachments"></a>

	<div id="attzone" class="w-100" style="display:block;">

	

	
	

	</div>
<div id="comment-container"></div>
			
													<div class="content clearfix modules mt-3" id="pagebottom_modules">
	




			<div id="module_91" style="" class="module box-related_video">
				<div id="mod-related_videopagebottom1">
										
<div id="related_video" style="display:block;">
</div>

													
					</div>
</div>

	



			<div id="module_92" style="" class="module box-menupage">
				<div id="mod-menupagepagebottom2">
													

		
													
					</div>
</div>


</div>
											</div>
					
				</div>
				
			</div> 
		</div> 
	</div> 
			

		
	
	

<div id="bootstrap-modal" class="modal fade footer-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			
			<div class="modal-header">
				<h4 class="modal-title" id="myModalLabel"></h4>
			</div>
		</div>
	</div>
</div>
<div id="bootstrap-modal-2" class="modal fade footer-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
		</div>
	</div>
</div>
<div id="bootstrap-modal-3" class="modal fade footer-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
		</div>
	</div>
</div>
				
	


	<!-- Global site tag (gtag.js) - Google Analytics -->


<!-- Put JS at the end -->
	
	
<script type="text/javascript" src="vendor_bundled/vendor/components/jquery/jquery.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/components/jquery-migrate/jquery-migrate.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/codemirror/codemirror/lib/codemirror.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/components/jqueryui/jquery-ui.js"></script>
<script type="text/javascript" src="temp/public/codemirror_modes.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/npm-asset/popper.js/dist/umd/popper.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/twbs/bootstrap/dist/js/bootstrap.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tiki-bootstrapmodalfix.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/iconsets.js"></script>
<script type="text/javascript" src="lib/tiki-js.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/studio-42/elfinder/js/elfinder.full.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/elfinder/tiki-elfinder.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tiki-jquery.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tiki-maps.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/jquery-json/src/jquery.json.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/zoom/jquery.zoom.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/codemirror/codemirror/addon/search/searchcursor.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/codemirror/codemirror/addon/mode/overlay.js"></script>
<script type="text/javascript" src="lib/codemirror_tiki/codemirror_tiki.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/infinitecarousel/jquery.infinitecarousel3.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tiki-confirm.js"></script>

<script type="text/javascript" src="vendor_bundled/vendor/harvesthq/chosen/chosen.jquery.min.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery/jquery-timepicker-addon/dist/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/fitvidjs/jquery.fitvids.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/superfish/dist/js/superfish.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/superfish/dist/js/supersubs.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/superfish/dist/js/hoverIntent.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/reflection-jquery/js/reflection.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/media/jquery.media.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/jquery.tablesorter.combined.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/parsers/parser-input-select.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-columnSelector.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-filter-formatter-jui.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-grouping.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-math.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-pager.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mottie/tablesorter/js/widgets/widget-sort2Hash.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tablesorter.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/tagcanvas/jquery.tagcanvas.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/colorbox/jquery.colorbox.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/bower-asset/swfobject/swfobject/swfobject.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/rmm5t/jquery-timeago/jquery.timeago.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/rmm5t/jquery-timeago/locales/jquery.timeago.en.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/avianey/jqdoublescroll/jquery.doubleScroll.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/jquery-validation/dist/jquery.validate.js"></script>
<script type="text/javascript" src="lib/validators/validator_tiki.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/async/jquery.async.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/jquery-plugins/treetable/jquery.treetable.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/cwspear/bootstrap-hover-dropdown/bootstrap-hover-dropdown.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/files.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tiki-trackers.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/svg-edit/svg-edit/embedapi.js"></script>
<script type="text/javascript" src="lib/svg-edit_tiki/draw.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/inline_edit.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/tiki-tasks.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/pluginedit.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/pdf.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/npm-asset/html2canvas/dist/html2canvas.min.js"></script>
<script type="text/javascript" src="vendor_bundled/vendor/mrrio/jspdf/jspdf.min.js"></script>
<script type="text/javascript" src="lib/jquery_tiki/fullcalendar_to_pdf.js"></script>
<script type="text/javascript" src="lang/en/language.js"></script>
<script type="text/javascript" src="lib/captcha/captchalib.js"></script>
	
<script type="text/javascript">
<!--//--><![CDATA[//><!--
// js 0 
tiki_cookie_jar=new Object();
setCookieBrowser('javascript_enabled', '1622293892000', '', new Date(1622293892000));
$.lang = 'en';

// JS Object to hold prefs for jq
var jqueryTiki = {"ui":true,"ui_theme":"flick","tooltips":true,"autocomplete":true,"superfish":true,"reflection":true,"tablesorter":true,"colorbox":true,"cboxCurrent":"{current} / {total}","sheet":true,"carousel":true,"validate":true,"zoom":true,"effect":"","effect_direction":"vertical","effect_speed":"400","effect_tabs":"none","effect_tabs_direction":"vertical","effect_tabs_speed":"fast","home_file_gallery":"5","autosave":true,"sefurl":true,"ajax":true,"syntaxHighlighter":true,"chosen":true,"chosen_sortable":false,"mapTileSets":["openstreetmap"],"infoboxTypes":["trackeritem","activity"],"googleStreetView":false,"googleStreetViewOverlay":false,"googleMapsAPIKey":"ABQIAAAAQNyVqGjgbUkeBZjVGN43nBQm7qDLuUr6PD9lu03O3Na4Jgp-xBTEdlCs9LWoI9vHWo2xg50eOgmWKw","structurePageRepeat":false,"mobile":false,"no_cookie":false,"language":"en","useInlineComment":false,"useInlineAnnotations":false,"helpurl":"http://doc.tiki.org/","shortDateFormat":"yy-mm-dd","shortTimeFormat":"HH:mm","username":null,"userRealName":null,"userAvatar":"http://doc.tiki.org/img/noavatar.png?v=1581008146","autoToc_inline":false,"autoToc_pos":"right","autoToc_offset":"44","bingMapsAPIKey":"","nextzenAPIKey":"","numericFieldScroll":"none","securityTimeout":"1440","current_object":{"type":"wiki page","object":"PluginDBReport"},"firstDayofWeek":0}

jqueryTiki.iconset = {"defaults":["500px","accessible-icon","accusoft","ad","address-book","address-card","adjust","adn","adversal","affiliatetheme","air-freshener","algolia","align-center","align-justify","align-left","align-right","alipay","allergies","amazon","amazon-pay","ambulance","american-sign-language-interpreting","amilia","anchor","android","angellist","angle-double-down","angle-double-left","angle-double-right","angle-double-up","angle-down","angle-left","angle-right","angle-up","angry","angrycreative","angular","ankh","app-store","app-store-ios","apper","apple","apple-alt","apple-pay","archive","archway","arrow-alt-circle-down","arrow-alt-circle-left","arrow-alt-circle-right","arrow-alt-circle-up","arrow-circle-down","arrow-circle-left","arrow-circle-right","arrow-circle-up","arrow-down","arrow-left","arrow-right","arrow-up","arrows-alt","arrows-alt-h","arrows-alt-v","assistive-listening-systems","asterisk","asymmetrik","at","atlas","atom","audible","audio-description","autoprefixer","avianex","aviato","award","aws","backspace","backward","balance-scale","ban","band-aid","bandcamp","barcode","bars","baseball-ball","basketball-ball","bath","battery-empty","battery-full","battery-half","battery-quarter","battery-three-quarters","bed","beer","behance","behance-square","bell","bell-slash","bezier-curve","bible","bicycle","bimobject","binoculars","birthday-cake","bitbucket","bitcoin","bity","black-tie","blackberry","blender","blind","blogger","blogger-b","bluetooth","bluetooth-b","bold","bolt","bomb","bone","bong","book","book-open","book-reader","bookmark","bowling-ball","box","box-open","boxes","braille","brain","briefcase","briefcase-medical","broadcast-tower","broom","brush","btc","bug","building","bullhorn","bullseye","burn","buromobelexperte","bus","bus-alt","business-time","buysellads","calculator","calendar","calendar-alt","calendar-check","calendar-minus","calendar-plus","calendar-times","camera","camera-retro","cannabis","capsules","car","car-alt","car-battery","car-crash","car-side","caret-down","caret-left","caret-right","caret-square-down","caret-square-left","caret-square-right","caret-square-up","caret-up","cart-arrow-down","cart-plus","cc-amazon-pay","cc-amex","cc-apple-pay","cc-diners-club","cc-discover","cc-jcb","cc-mastercard","cc-paypal","cc-stripe","cc-visa","centercode","certificate","chalkboard","chalkboard-teacher","charging-station","chart-area","chart-bar","chart-line","chart-pie","check","check-circle","check-double","check-square","chess","chess-bishop","chess-board","chess-king","chess-knight","chess-pawn","chess-queen","chess-rook","chevron-circle-down","chevron-circle-left","chevron-circle-right","chevron-circle-up","chevron-down","chevron-left","chevron-right","chevron-up","child","chrome","church","circle","circle-notch","city","clipboard","clipboard-check","clipboard-list","clock","clone","closed-captioning","cloud","cloud-download-alt","cloud-upload-alt","cloudscale","cloudsmith","cloudversify","cocktail","code","code-branch","codepen","codiepie","coffee","cog","cogs","coins","columns","comment","comment-alt","comment-dollar","comment-dots","comment-slash","comments","comments-dollar","compact-disc","compass","compress","concierge-bell","connectdevelop","contao","cookie","cookie-bite","copy","copyright","couch","cpanel","creative-commons","creative-commons-by","creative-commons-nc","creative-commons-nc-eu","creative-commons-nc-jp","creative-commons-nd","creative-commons-pd","creative-commons-pd-alt","creative-commons-remix","creative-commons-sa","creative-commons-sampling","creative-commons-sampling-plus","creative-commons-share","credit-card","crop","crop-alt","cross","crosshairs","crow","crown","css3","css3-alt","cube","cubes","cut","cuttlefish","d-and-d","dashcube","database","deaf","delicious","deploydog","deskpro","desktop","deviantart","dharmachakra","diagnoses","dice","dice-five","dice-four","dice-one","dice-six","dice-three","dice-two","digg","digital-ocean","digital-tachograph","directions","discord","discourse","divide","dizzy","dna","dochub","docker","dollar-sign","dolly","dolly-flatbed","donate","door-closed","door-open","dot-circle","dove","download","draft2digital","drafting-compass","draw-polygon","dribbble","dribbble-square","dropbox","drum","drum-steelpan","drupal","dumbbell","dyalog","earlybirds","ebay","edge","edit","eject","elementor","ellipsis-h","ellipsis-v","ello","ember","empire","envelope","envelope-open","envelope-open-text","envelope-square","envira","equals","eraser","erlang","ethereum","etsy","euro-sign","exchange-alt","exclamation","exclamation-circle","exclamation-triangle","expand","expand-arrows-alt","expeditedssl","external-link-alt","external-link-square-alt","eye","eye-dropper","eye-slash","facebook","facebook-f","facebook-messenger","facebook-square","fast-backward","fast-forward","fax","feather","feather-alt","female","fighter-jet","file","file-alt","file-archive","file-audio","file-code","file-contract","file-download","file-excel","file-export","file-image","file-import","file-invoice","file-invoice-dollar","file-medical","file-medical-alt","file-pdf","file-powerpoint","file-prescription","file-signature","file-upload","file-video","file-word","fill","fill-drip","film","filter","fingerprint","fire","fire-extinguisher","firefox","first-aid","first-order","first-order-alt","firstdraft","fish","flag","flag-checkered","flask","flickr","flipboard","flushed","fly","folder","folder-minus","folder-open","folder-plus","font","font-awesome","font-awesome-alt","font-awesome-flag","fonticons","fonticons-fi","football-ball","fort-awesome","fort-awesome-alt","forumbee","forward","foursquare","free-code-camp","freebsd","frog","frown","frown-open","fulcrum","funnel-dollar","futbol","galactic-republic","galactic-senate","gamepad","gas-pump","gavel","gem","genderless","get-pocket","gg","gg-circle","ghost","gift","gifts","git","git-square","github","github-alt","github-square","gitkraken","gitlab","gitter","glass-cheers","glass-martini","glass-martini-alt","glass-whiskey","glasses","glide","glide-g","globe","globe-africa","globe-americas","globe-asia","globe-europe","gofore","golf-ball","goodreads","goodreads-g","google","google-drive","google-play","google-plus","google-plus-g","google-plus-square","google-wallet","gopuram","graduation-cap","gratipay","grav","greater-than","greater-than-equal","grimace","grin","grin-alt","grin-beam","grin-beam-sweat","grin-hearts","grin-squint","grin-squint-tears","grin-stars","grin-tears","grin-tongue","grin-tongue-squint","grin-tongue-wink","grin-wink","grip-horizontal","grip-lines","grip-lines-vertical","grip-vertical","gripfire","grunt","guitar","gulp","h-square","hacker-news","hacker-news-square","hackerrank","hammer","hamsa","hand-holding","hand-holding-heart","hand-holding-usd","hand-lizard","hand-paper","hand-peace","hand-point-down","hand-point-left","hand-point-right","hand-point-up","hand-pointer","hand-rock","hand-scissors","hand-spock","hands","hands-helping","handshake","hanukiah","hashtag","hat-wizard","haykal","hdd","heading","headphones","headphones-alt","headset","heart","heart-broken","heartbeat","helicopter","highlighter","hiking","hippo","hips","hire-a-helper","history","hockey-puck","holly-berry","home","hooli","hornbill","horse","horse-head","hospital","hospital-alt","hospital-symbol","hot-tub","hotel","hotjar","hourglass","hourglass-end","hourglass-half","hourglass-start","house-damage","houzz","hryvnia","html5","hubspot","i-cursor","id-badge","id-card","id-card-alt","image","images","imdb","inbox","indent","industry","infinity","info","info-circle","instagram","internet-explorer","ioxhost","italic","itunes","itunes-note","java","jedi","jedi-order","jenkins","joget","joint","joomla","journal-whills","js","js-square","jsfiddle","kaaba","kaggle","key","keybase","keyboard","keycdn","khanda","kickstarter","kickstarter-k","kiss","kiss-beam","kiss-wink-heart","kiwi-bird","korvue","landmark","language","laptop","laptop-code","laravel","lastfm","lastfm-square","laugh","laugh-beam","laugh-squint","laugh-wink","layer-group","leaf","leanpub","lemon","less","less-than","less-than-equal","level-down-alt","level-up-alt","life-ring","lightbulb","line","link","linkedin","linkedin-in","linode","linux","lira-sign","list","list-alt","list-ol","list-ul","location-arrow","lock","lock-open","long-arrow-alt-down","long-arrow-alt-left","long-arrow-alt-right","long-arrow-alt-up","low-vision","luggage-cart","lyft","magento","magic","magnet","mail-bulk","mailchimp","male","mandalorian","map","map-marked","map-marked-alt","map-marker","map-marker-alt","map-pin","map-signs","markdown","marker","mars","mars-double","mars-stroke","mars-stroke-h","mars-stroke-v","mastodon","maxcdn","medal","medapps","medium","medium-m","medkit","medrt","meetup","megaport","meh","meh-blank","meh-rolling-eyes","memory","menorah","mercury","microchip","microphone","microphone-alt","microphone-alt-slash","microphone-slash","microscope","microsoft","minus","minus-circle","minus-square","mix","mixcloud","mizuni","mobile","mobile-alt","modx","monero","money-bill","money-bill-alt","money-bill-wave","money-bill-wave-alt","money-check","money-check-alt","monument","moon","mortar-pestle","mosque","motorcycle","mouse-pointer","music","napster","neos","neuter","newspaper","nimblr","nintendo-switch","node","node-js","not-equal","notes-medical","npm","ns8","nutritionix","object-group","object-ungroup","odnoklassniki","odnoklassniki-square","oil-can","old-republic","om","opencart","openid","opera","optin-monster","osi","outdent","page4","pagelines","paint-brush","paint-roller","palette","palfed","pallet","paper-plane","paperclip","parachute-box","paragraph","parking","passport","pastafarianism","paste","patreon","pause","pause-circle","paw","paypal","peace","pen","pen-alt","pen-fancy","pen-nib","pen-square","pencil-alt","pencil-ruler","people-carry","percent","percentage","periscope","phabricator","phoenix-framework","phoenix-squadron","phone","phone-slash","phone-square","phone-volume","php","pied-piper","pied-piper-alt","pied-piper-hat","pied-piper-pp","piggy-bank","pills","pinterest","pinterest-p","pinterest-square","place-of-worship","plane","plane-arrival","plane-departure","play","play-circle","playstation","plug","plus","plus-circle","plus-square","podcast","poll","poll-h","poo","poop","portrait","pound-sign","power-off","pray","praying-hands","prescription","prescription-bottle","prescription-bottle-alt","print","procedures","product-hunt","project-diagram","pushed","puzzle-piece","python","qq","qrcode","question","question-circle","quidditch","quinscape","quora","quote-left","quote-right","quran","r-project","radiation","radiation-alt","rainbow","random","raspberry-pi","ravelry","react","reacteurope","readme","rebel","receipt","recycle","red-river","reddit","reddit-alien","reddit-square","redhat","redo","redo-alt","registered","renren","reply","reply-all","replyd","republican","researchgate","resolving","restroom","retweet","rev","ribbon","ring","road","robot","rocket","rocketchat","rockrms","route","rss","rss-square","ruble-sign","ruler","ruler-combined","ruler-horizontal","ruler-vertical","running","rupee-sign","sad-cry","sad-tear","safari","sass","save","schlix","school","screwdriver","scribd","search","search-dollar","search-location","search-minus","search-plus","searchengin","seedling","sellcast","sellsy","server","servicestack","shapes","share","share-alt","share-alt-square","share-square","shekel-sign","shield-alt","ship","shipping-fast","shirtsinbulk","shoe-prints","shopping-bag","shopping-basket","shopping-cart","shopware","shower","shuttle-van","sign","sign-in-alt","sign-language","sign-out-alt","signal","signature","simplybuilt","sistrix","sitemap","sith","skull","skyatlas","skype","slack","slack-hash","sliders-h","slideshare","smile","smile-beam","smile-wink","smoking","smoking-ban","snapchat","snapchat-ghost","snapchat-square","snowflake","socks","solar-panel","sort","sort-alpha-down","sort-alpha-up","sort-amount-down","sort-amount-up","sort-down","sort-numeric-down","sort-numeric-up","sort-up","soundcloud","spa","space-shuttle","speakap","spinner","splotch","spotify","spray-can","square","square-full","square-root-alt","squarespace","stack-exchange","stack-overflow","stamp","star","star-and-crescent","star-half","star-half-alt","star-of-david","star-of-life","staylinked","steam","steam-square","steam-symbol","step-backward","step-forward","stethoscope","sticker-mule","sticky-note","stop","stop-circle","stopwatch","store","store-alt","strava","stream","street-view","strikethrough","stripe","stripe-s","stroopwafel","studiovinari","stumbleupon","stumbleupon-circle","subscript","subway","suitcase","suitcase-rolling","sun","superpowers","superscript","supple","surprise","swatchbook","swimmer","swimming-pool","synagogue","sync","sync-alt","syringe","table","table-tennis","tablet","tablet-alt","tablets","tachometer-alt","tag","tags","tape","tasks","taxi","teamspeak","teeth","teeth-open","telegram","telegram-plane","tencent-weibo","terminal","text-height","text-width","th","th-large","th-list","the-red-yeti","theater-masks","themeco","themeisle","thermometer","thermometer-empty","thermometer-full","thermometer-half","thermometer-quarter","thermometer-three-quarters","thumbs-down","thumbs-up","thumbtack","ticket-alt","times","times-circle","tint","tint-slash","tired","toggle-off","toggle-on","toolbox","tooth","torah","torii-gate","trade-federation","trademark","traffic-light","train","transgender","transgender-alt","trash","trash-alt","tree","trello","tripadvisor","trophy","truck","truck-loading","truck-monster","truck-moving","truck-pickup","tshirt","tty","tumblr","tumblr-square","tv","twitch","twitter","twitter-square","typo3","uber","uikit","umbrella","umbrella-beach","underline","undo","undo-alt","uniregistry","universal-access","university","unlink","unlock","unlock-alt","untappd","upload","usb","user","user-alt","user-alt-slash","user-astronaut","user-check","user-circle","user-clock","user-cog","user-edit","user-friends","user-graduate","user-lock","user-md","user-minus","user-ninja","user-plus","user-secret","user-shield","user-slash","user-tag","user-tie","user-times","users","users-cog","ussunnah","utensil-spoon","utensils","vaadin","vector-square","venus","venus-double","venus-mars","viacoin","viadeo","viadeo-square","vial","vials","viber","video","video-slash","vihara","vimeo","vimeo-square","vimeo-v","vine","vk","vnv","volleyball-ball","volume-down","volume-mute","volume-off","volume-up","vote-yea","vr-cardboard","vuejs","walking","wallet","warehouse","water","weebly","weibo","weight","weight-hanging","weixin","whatsapp","whatsapp-square","wheelchair","whmcs","wifi","wikipedia-w","wind","window-close","window-maximize","window-minimize","window-restore","windows","wine-bottle","wine-glass","wine-glass-alt","wix","wizards-of-the-coast","wolf-pack-battalion","won-sign","wordpress","wordpress-simple","wpbeginner","wpexplorer","wpforms","wpressr","wrench","x-ray","xbox","xing","xing-square","y-combinator","yahoo","yandex","yandex-international","yelp","yen-sign","yin-yang","yoast","youtube","youtube-square","zhihu"],"icons":{"actions":{"id":"play-circle"},"admin":{"id":"cog"},"add":{"id":"plus-circle"},"admin_ads":{"id":"film"},"admin_articles":{"id":"newspaper","prepend":"far fa-"},"admin_blogs":{"id":"bold"},"admin_calendar":{"id":"calendar-alt","prepend":"far fa-"},"admin_category":{"id":"sitemap fa-rotate-270"},"admin_comments":{"id":"comment"},"admin_community":{"id":"users"},"admin_connect":{"id":"link"},"admin_copyright":{"id":"copyright","prepend":"far fa-"},"admin_directory":{"id":"folder","prepend":"far fa-"},"admin_faqs":{"id":"question"},"admin_features":{"id":"power-off"},"admin_fgal":{"id":"folder-open"},"admin_forums":{"id":"comments"},"admin_freetags":{"id":"tags"},"admin_gal":{"id":"file-image","prepend":"far fa-"},"admin_general":{"id":"cog"},"admin_i18n":{"id":"language"},"admin_intertiki":{"id":"exchange-alt"},"admin_login":{"id":"sign-in-alt"},"admin_user":{"id":"user"},"admin_look":{"id":"image","prepend":"far fa-"},"admin_maps":{"id":"map-marker-alt"},"admin_messages":{"id":"envelope","prepend":"far fa-"},"admin_metatags":{"id":"tag"},"admin_module":{"id":"shapes"},"admin_payment":{"id":"credit-card","prepend":"far fa-"},"admin_performance":{"id":"tachometer-alt"},"admin_polls":{"id":"tasks"},"admin_profiles":{"id":"cube"},"admin_rating":{"id":"check-square"},"admin_rss":{"id":"rss"},"admin_score":{"id":"trophy"},"admin_search":{"id":"search"},"admin_semantic":{"id":"arrows-alt-h"},"admin_security":{"id":"lock"},"admin_sefurl":{"id":"search-plus"},"admin_share":{"id":"share-alt"},"admin_socialnetworks":{"id":"thumbs-up"},"admin_stats":{"id":"chart-bar","prepend":"far fa-"},"admin_textarea":{"id":"edit"},"admin_trackers":{"id":"database"},"admin_userfiles":{"id":"cog"},"admin_video":{"id":"video"},"admin_webmail":{"id":"inbox"},"admin_webservices":{"id":"cog"},"admin_wiki":{"id":"file-alt","prepend":"far fa-"},"admin_workspace":{"id":"desktop"},"admin_wysiwyg":{"id":"file-alt"},"admin_print":{"id":"print"},"admin_packages":{"id":"gift"},"admin_rtc":{"id":"bullhorn"},"adn":{"id":"adn","prepend":"fab fa-"},"amazon":{"id":"amazon","prepend":"fab fa-"},"android":{"id":"android","prepend":"fab fa-"},"angellist":{"id":"angellist","prepend":"fab fa-"},"apple":{"id":"apple","prepend":"fab fa-"},"area-chart":{"id":"chart-area"},"arrows":{"id":"arrows-alt"},"arrows-h":{"id":"arrows-alt-h"},"arrows-v":{"id":"arrows-alt-v"},"articles":{"id":"newspaper","prepend":"far fa-"},"attach":{"id":"paperclip"},"audio":{"id":"file-audio","prepend":"far fa-"},"back":{"id":"arrow-left"},"background-color":{"id":"paint-brush"},"backlink":{"id":"reply"},"backward_step":{"id":"step-backward"},"bar-chart":{"id":"chart-bar"},"behance":{"id":"behance","prepend":"fab fa-"},"behance-square":{"id":"behance-square","prepend":"fab fa-"},"bitbucket":{"id":"bitbucket","prepend":"fab fa-"},"black-tie":{"id":"black-tie","prepend":"fab fa-"},"bluetooth":{"id":"bluetooth","prepend":"fab fa-"},"bluetooth-b":{"id":"bluetooth-b","prepend":"fab fa-"},"box":{"id":"list-alt","prepend":"far fa-"},"btc":{"id":"btc","prepend":"fab fa-"},"buysellads":{"id":"buysellads","prepend":"fab fa-"},"cart":{"id":"shopping-cart"},"chart":{"id":"chart-area"},"cc-amex":{"id":"cc-amex","prepend":"fab fa-"},"cc-diners-club":{"id":"cc-diners-club","prepend":"fab fa-"},"cc-discover":{"id":"cc-discover","prepend":"fab fa-"},"cc-jcb":{"id":"cc-jcb","prepend":"fab fa-"},"cc-mastercard":{"id":"cc-mastercard","prepend":"fab fa-"},"cc-paypal":{"id":"cc-paypal","prepend":"fab fa-"},"cc-stripe":{"id":"cc-stripe","prepend":"fab fa-"},"cc-visa":{"id":"cc-visa","prepend":"fab fa-"},"chrome":{"id":"chrome","prepend":"fab fa-"},"close":{"id":"times"},"cloud-download":{"id":"cloud-download-alt"},"cloud-upload":{"id":"cloud-upload-alt"},"code_file":{"id":"file-code","prepend":"far fa-"},"code-fork":{"id":"code-branch"},"codepen":{"id":"codepen","prepend":"fab fa-"},"codiepie":{"id":"codiepie","prepend":"fab fa-"},"collapsed":{"id":"plus-square","prepend":"far fa-"},"comments":{"id":"comments","prepend":"far fa-"},"compose":{"id":"pencil-alt"},"computer":{"id":"desktop"},"contacts":{"id":"users"},"content-template":{"id":"file","prepend":"far fa-"},"create":{"id":"plus"},"creative-commons":{"id":"creative-commons","prepend":"fab fa-"},"css3":{"id":"css3","prepend":"fab fa-"},"dashboard":{"id":"tachometer-alt"},"dashcube":{"id":"dashcube","prepend":"fab fa-"},"delete":{"id":"times"},"delicious":{"id":"delicious","prepend":"fab fa-"},"deviantart":{"id":"deviantart","prepend":"fab fa-"},"difference":{"id":"strikethrough"},"disable":{"id":"minus-square"},"documentation":{"id":"book"},"down":{"id":"sort-down"},"dribbble":{"id":"dribbble","prepend":"fab fa-"},"dropbox":{"id":"dropbox","prepend":"fab fa-"},"drupal":{"id":"drupal","prepend":"fab fa-"},"edge":{"id":"edge","prepend":"fab fa-"},"education":{"id":"graduation-cap"},"empire":{"id":"empire","prepend":"fab fa-"},"envelope":{"id":"envelope","prepend":"far fa-"},"envira":{"id":"envira","prepend":"fab fa-"},"erase":{"id":"eraser"},"error":{"id":"exclamation-circle"},"excel":{"id":"file-excel","prepend":"far fa-"},"exchange":{"id":"exchange-alt"},"expanded":{"id":"minus-square","prepend":"far fa-"},"expeditedssl":{"id":"expeditedssl","prepend":"fab fa-"},"export":{"id":"download"},"facebook":{"id":"facebook","prepend":"fab fa-"},"facebook-f":{"id":"facebook-f","prepend":"fab fa-"},"file":{"id":"file","prepend":"far fa-"},"file-archive":{"id":"folder"},"file-archive-open":{"id":"folder-open"},"file-text":{"id":"file-alt"},"file-text-o":{"id":"file-alt","prepend":"far fa-"},"firefox":{"id":"firefox","prepend":"fab fa-"},"first-order":{"id":"first-order","prepend":"fab fa-"},"flickr":{"id":"flickr","prepend":"fab fa-"},"floppy":{"id":"save","prepend":"far fa-"},"font-awesome":{"id":"font-awesome","prepend":"fab fa-"},"font-color":{"id":"font","class":"text-danger"},"fonticons":{"id":"fonticons","prepend":"fab fa-"},"fort-awesome":{"id":"fort-awesome","prepend":"fab fa-"},"forumbee":{"id":"forumbee","prepend":"fab fa-"},"forward_step":{"id":"step-forward"},"foursquare":{"id":"foursquare","prepend":"fab fa-"},"fullscreen":{"id":"expand-arrows-alt"},"get-pocket":{"id":"get-pocket","prepend":"fab fa-"},"gg":{"id":"gg","prepend":"fab fa-"},"gg-circle":{"id":"gg-circle","prepend":"fab fa-"},"git":{"id":"git","prepend":"fab fa-"},"git-square":{"id":"git-square","prepend":"fab fa-"},"github":{"id":"github","prepend":"fab fa-"},"github-alt":{"id":"github-alt","prepend":"fab fa-"},"github-square":{"id":"github-square","prepend":"fab fa-"},"gitlab":{"id":"gitlab","prepend":"fab fa-"},"glide":{"id":"glide","prepend":"fab fa-"},"glide-g":{"id":"glide-g","prepend":"fab fa-"},"google":{"id":"google","prepend":"fab fa-"},"google-plus":{"id":"google-plus","prepend":"fab fa-"},"google-plus-g":{"id":"google-plus-g","prepend":"fab fa-"},"google-plus-square":{"id":"google-plus-square","prepend":"fab fa-"},"group":{"id":"users"},"h1":{"id":"heading"},"h2":{"id":"heading","size":".9"},"h3":{"id":"heading","size":".8"},"hacker-news":{"id":"hacker-news","prepend":"fab fa-"},"help":{"id":"question-circle"},"history":{"id":"clock","prepend":"far fa-"},"horizontal-rule":{"id":"minus"},"houzz":{"id":"houzz","prepend":"fab fa-"},"html":{"id":"html5","prepend":"fab fa-"},"image":{"id":"file-image","prepend":"far fa-"},"import":{"id":"upload"},"index":{"id":"spinner"},"information":{"id":"info-circle","prepend":null,"append":null},"instagram":{"id":"instagram","prepend":"fab fa-"},"internet-explorer":{"id":"internet-explorer","prepend":"fab fa-"},"ioxhost":{"id":"ioxhost","prepend":"fab fa-"},"java":{"id":"java","prepend":"fab fa-"},"joomla":{"id":"joomla","prepend":"fab fa-"},"js":{"id":"js","prepend":"fab fa-"},"jsfiddle":{"id":"jsfiddle","prepend":"fab fa-"},"keyboard":{"id":"keyboard","prepend":"far fa-"},"lastfm":{"id":"lastfm","prepend":"fab fa-"},"lastfm-square":{"id":"lastfm-square","prepend":"fab fa-"},"leanpub":{"id":"leanpub","prepend":"fab fa-"},"less":{"id":"less","prepend":"fab fa-"},"level-down":{"id":"level-down-alt"},"level-up":{"id":"level-up-alt"},"like":{"id":"thumbs-up"},"line-chart":{"id":"chart-line"},"link-external":{"id":"external-link-alt"},"link-external-alt":{"id":"external-link-square-alt"},"linkedin":{"id":"linkedin","prepend":"fab fa-"},"linkedin-in":{"id":"linkedin-in","prepend":"fab fa-"},"linux":{"id":"linux","prepend":"fab fa-"},"list-numbered":{"id":"list-ol"},"listgui_display":{"id":"desktop"},"listgui_filter":{"id":"filter"},"listgui_format":{"id":"indent"},"listgui_pagination":{"id":"book"},"listgui_output":{"id":"eye","prepend":"far fa-"},"listgui_column":{"id":"columns"},"listgui_tablesorter":{"id":"table"},"listgui_icon":{"id":"user"},"listgui_body":{"id":"align-justify"},"listgui_carousel":{"id":"slideshare","prepend":"fab fa-"},"listgui_sort":{"id":"sort-alpha-up"},"listgui_wikitext":{"id":"file-alt","prepend":"far fa-"},"listgui_caption":{"id":"align-center"},"log":{"id":"history"},"login":{"id":"sign-in-alt"},"logout":{"id":"sign-out-alt"},"long-arrow-down":{"id":"long-arrow-alt-down"},"long-arrow-left":{"id":"long-arrow-alt-left"},"long-arrow-right":{"id":"long-arrow-alt-right"},"long-arrow-up":{"id":"long-arrow-alt-up"},"mailbox":{"id":"inbox"},"magnifier":{"id":"search"},"maxcdn":{"id":"maxcdn","prepend":"fab fa-"},"medium":{"id":"medium","prepend":"fab fa-"},"menu":{"id":"bars"},"menu-extra":{"id":"chevron-down"},"menuitem":{"id":"angle-right"},"merge":{"id":"random"},"microsoft":{"id":"microsoft","prepend":"fab fa-"},"minimize":{"id":"compress"},"mixcloud":{"id":"mixcloud","prepend":"fab fa-"},"module":{"id":"square"},"modules":{"id":"shapes"},"modx":{"id":"modx","prepend":"fab fa-"},"money":{"id":"money-bill"},"more":{"id":"ellipsis-h"},"move":{"id":"exchange-alt"},"next":{"id":"arrow-right"},"notepad":{"id":"file-alt","prepend":"far fa-"},"notification":{"id":"bell","prepend":"far fa-"},"off":{"id":"power-off"},"ok":{"id":"check-circle"},"opencart":{"id":"opencart","prepend":"fab fa-"},"openid":{"id":"openid","prepend":"fab fa-"},"opera":{"id":"opera","prepend":"fab fa-"},"optin-monster":{"id":"optin-monster","prepend":"fab fa-"},"page-break":{"id":"cut"},"pagelines":{"id":"pagelines","prepend":"fab fa-"},"paypal":{"id":"paypal","prepend":"fab fa-"},"pdf":{"id":"file-pdf","prepend":"far fa-"},"pencil":{"id":"pencil-alt"},"permission":{"id":"key"},"pie-chart":{"id":"chart-pie"},"pied-piper":{"id":"pied-piper","prepend":"fab fa-"},"pied-piper-alt":{"id":"pied-piper-alt","prepend":"fab fa-"},"pied-piper-pp":{"id":"pied-piper-pp","prepend":"fab fa-"},"pinterest":{"id":"pinterest","prepend":"fab fa-"},"pinterest-p":{"id":"pinterest-p","prepend":"fab fa-"},"pinterest-square":{"id":"pinterest-square","prepend":"fab fa-"},"plugin":{"id":"puzzle-piece"},"popup":{"id":"list-alt","prepend":"far fa-"},"post":{"id":"pencil-alt"},"powerpoint":{"id":"file-powerpoint","prepend":"far fa-"},"previous":{"id":"arrow-left"},"qq":{"id":"qq","prepend":"fab fa-"},"quotes":{"id":"quote-left"},"ranking":{"id":"sort-numeric-down"},"reddit":{"id":"reddit","prepend":"fab fa-"},"reddit-alien":{"id":"reddit-alien","prepend":"fab fa-"},"reddit-square":{"id":"reddit-square","prepend":"fab fa-"},"refresh":{"id":"sync"},"remove":{"id":"times"},"renren":{"id":"renren","prepend":"fab fa-"},"repeat":{"id":"redo"},"safari":{"id":"safari","prepend":"fab fa-"},"sass":{"id":"sass","prepend":"fab fa-"},"scissors":{"id":"cut"},"scribd":{"id":"scribd","prepend":"fab fa-"},"screencapture":{"id":"camera"},"selectall":{"id":"file-alt"},"send":{"id":"paper-plane"},"settings":{"id":"wrench"},"sharethis":{"id":"share-alt"},"shorten":{"id":"crop"},"simplybuilt":{"id":"simplybuilt","prepend":"fab fa-"},"skyatlas":{"id":"skyatlas","prepend":"fab fa-"},"skype":{"id":"skype","prepend":"fab fa-"},"slack":{"id":"slack","prepend":"fab fa-"},"smile":{"id":"smile","prepend":"far fa-"},"snapchat":{"id":"snapchat","prepend":"fab fa-"},"snapchat-ghost":{"id":"snapchat-ghost","prepend":"fab fa-"},"snapchat-square":{"id":"snapchat-square","prepend":"fab fa-"},"sort-asc":{"id":"sort-up"},"sort-alpha-asc":{"id":"sort-alpha-up"},"sort-alpha-desc":{"id":"sort-alpha-down"},"sort-amount-asc":{"id":"sort-amount-up"},"sort-amount-desc":{"id":"sort-amount-down"},"sort-desc":{"id":"sort-down"},"sort-down":{"id":"sort-down"},"sort-numeric-asc":{"id":"sort-numeric-up"},"sort-numeric-desc":{"id":"sort-numeric-down"},"sort-up":{"id":"sort-up"},"soundcloud":{"id":"soundcloud","prepend":"fab fa-"},"spotify":{"id":"spotify","prepend":"fab fa-"},"stack-exchange":{"id":"stack-exchange","prepend":"fab fa-"},"stack-overflow":{"id":"stack-overflow","prepend":"fab fa-"},"star-empty":{"id":"star","prepend":"far fa-"},"star-empty-selected":{"id":"star","prepend":"far fa-","class":"text-success"},"star-half-rating":{"id":"star-half","prepend":"far fa-"},"star-half-selected":{"id":"star-half","prepend":"far fa-","class":"text-success"},"star-selected":{"id":"star","class":"text-success"},"status-open":{"id":"circle","style":"color:green"},"status-pending":{"id":"adjust","style":"color:orange"},"status-closed":{"id":"times-circle","prepend":"far fa-","style":"color:grey"},"steam":{"id":"steam","prepend":"fab fa-"},"steam-square":{"id":"steam-square","prepend":"fab fa-"},"stop-watching":{"id":"eye-slash","prepend":"far fa-"},"structure":{"id":"sitemap"},"stumbleupon":{"id":"stumbleupon","prepend":"fab fa-"},"success":{"id":"check"},"textfile":{"id":"file-alt","prepend":"far fa-"},"themeisle":{"id":"themeisle","prepend":"fab fa-"},"three-d":{"id":"cube"},"ticket":{"id":"ticket-alt"},"time":{"id":"clock","prepend":"far fa-"},"title":{"id":"text-width"},"toggle-left":{"id":"caret-square-left","prepend":"far fa-"},"toggle-off":{"id":"toggle-off"},"toggle-on":{"id":"toggle-on"},"toggle-right":{"id":"caret-square-right","prepend":"far fa-"},"trackers":{"id":"database"},"translate":{"id":"language"},"trash":{"id":"trash-alt","prepend":"far fa-"},"trello":{"id":"trello","prepend":"fab fa-"},"tripadvisor":{"id":"tripadvisor","prepend":"fab fa-"},"tumblr":{"id":"tumblr","prepend":"fab fa-"},"tumblr-square":{"id":"tumblr-square","prepend":"fab fa-"},"twitch":{"id":"twitch","prepend":"fab fa-"},"twitter":{"id":"twitter","prepend":"fab fa-"},"twitter-square":{"id":"twitter-square","prepend":"fab fa-"},"unlike":{"id":"thumbs-down"},"up":{"id":"sort-up"},"usb":{"id":"usb","prepend":"fab fa-"},"viacoin":{"id":"viacoin","prepend":"fab fa-"},"video":{"id":"file-video","prepend":"far fa-"},"video_file":{"id":"file-video","prepend":"far fa-"},"view":{"id":"search-plus"},"vimeo":{"id":"vimeo-square","prepend":"fab fa-"},"vine":{"id":"vine","prepend":"fab fa-"},"vk":{"id":"vk","prepend":"fab fa-"},"warning":{"id":"exclamation-triangle"},"watch":{"id":"eye","prepend":"far fa-"},"watch-group":{"id":"users"},"weibo":{"id":"weibo","prepend":"fab fa-"},"whatsapp":{"id":"whatsapp","prepend":"fab fa-"},"windows":{"id":"windows","prepend":"fab fa-"},"wiki":{"id":"file-alt","prepend":"far fa-"},"wizard":{"id":"magic"},"word":{"id":"file-word","prepend":"far fa-"},"wysiwyg":{"id":"file-alt"},"xbox":{"id":"xbox","prepend":"fab fa-"},"xing":{"id":"xing","prepend":"fab fa-"},"xing-square":{"id":"xing-square","prepend":"fab fa-"},"yahoo":{"id":"yahoo","prepend":"fab fa-"},"youtube":{"id":"youtube","prepend":"fab fa-"},"youtube-square":{"id":"youtube-square","prepend":"fab fa-"},"zip":{"id":"file-archive","prepend":"far fa-"}},"tag":"span","prepend":"fas fa-","append":" fa-fw","rotate":{"90":" fa-rotate-90","180":" fa-rotate-180","270":" fa-rotate-270","horizontal":" fa-flip-horizontal","vertical":" fa-flip-vertical"}}
var zoomToFoundLocation = "street";

var bootstrapButton;
if (typeof $.fn.button.noConflict === "function") {
	bootstrapButton = $.fn.button.noConflict() // return $.fn.button to previously assigned value
	$.fn.bootstrapBtn = bootstrapButton            // give $().bootstrapBtn the Bootstrap functionality
}

/*
if (getCookie('postitnote') != 'hidden') {
  $('#postitnote').removeClass('hidden').hide().delay('500').fadeIn('slow');
}
*/

/* 
 * this section of the custom js amends the way that OpenLayers 'spaces out' 
 * dot and dot/dash markings for paths etc - added by Geoff (eromneg) Aug '14
*/
 if ( typeof OpenLayers != "undefined") {
 OpenLayers.Renderer.SVG.prototype.dashStyle = function(style, widthFactor) {
        var w = style.strokeWidth * widthFactor;
        var str = style.strokeDashstyle;
        switch (str) {
            case 'solid':
                return 'none';
            case 'dot':
                return [1, 4 * w].join();
            case 'dash':
                return [4 * w, 2 * w].join();
            case 'dashdot':
                return [4 * w, 2 * w, 1, 2 * w].join();
            case 'longdash':
                return [8 * w, 2 * w].join();
            case 'longdashdot':
                return [8 * w, 2 * w, 1, 2 * w].join();
            default:
                return OpenLayers.String.trim(str).replace(/\s+/g, ",");
        }
    }
}
					function submitSearch1() {
						var $f = $('#search-module-form1');
						if ($f.attr('action') !== "tiki-editpage.php" && $f.data('page_selected') === $("#search_mod_input_1").val()) {
							if ($f.find('input[name="find"]').length) {
								$f.find('input[name="find"]').val($f.data('page_selected'));
							} else {
								$f.append($('<input name="find">').val($f.data('page_selected')));
							}
							$f.attr('action', 'tiki-listpages.php');
						} else if ($f.attr('action') == "#") {
							$f.attr('action', 'tiki-searchindex.php');
						}
						$exact = $f.find("input[name=exact_match]");
						if ($exact.val() != "y") {
							$exact.remove(); // seems exact_match is true even if empty
						}
						return true;
					}
				

function capLock(e, el){
	kc = e.keyCode ? e.keyCode : e.which;
	sk = e.shiftKey ? e.shiftKey : (kc == 16 ? true : false);
	if ((kc >= 65 && kc <= 90 && !sk) || (kc >= 97 && kc <= 122 && sk)) {
		$('.divCapson', $(el).parents('div:first')).show();
	} else {
		$('.divCapson', $(el).parents('div:first')).hide();
	}
}

// js 2 

try {
	var timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
	setCookie("local_tz", timezone);
} catch (e) {}

// this is used by tiki-confirm.js checkTimeout, so needs to be always set
var now = new Date();

if (! timezone) {
	function inArray(item, array) {
		for (var i in array) {
			if (array[i] === item) {
				return i;
			}
		}
		return false;
	}
	var allTimeZoneCodes = ["ACDT","ACST","ADDT","ADT","AEDT","AEST","AHDT","AHST","AKDT","AKST","AMT","APT","AST","AWDT","AWST","AWT","BDST","BDT","BMT","BOST","BST","CAST","CAT","CDDT","CDT","CEMT","CEST","CET","CMT","CPT","CST","CWT","CHST","DMT","EAT","EDDT","EDT","EEST","EET","EMT","EPT","EST","EWT","FFMT","FMT","GMT","GST","HDT","HKST","HKT","HMT","HST","IDDT","IDT","IMT","IST","JDT","JMT","JST","KDT","KMT","KST","LST","MDDT","MDST","MDT","MMT","MPT","MSD","MSK","MST","MWT","NDDT","NDT","NPT","NST","NWT","NZDT","NZMT","NZST","PDDT","PDT","PKST","PKT","PLMT","PMMT","PMT","PPMT","PPT","PST","PWT","QMT","RMT","SAST","SDMT","SET","SJMT","SMT","SST","TBMT","TMT","UCT","UTC","WAST","WAT","WEMT","WEST","WET","WIB","WITA","WIT","WMT","YDDT","YDT","YPT","YST","YWT","A","B","C","D","E","F","G","H","I","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
	var now_string = now.toString();
	var offsethours = - now.getTimezoneOffset() / 60;
	setCookie("local_tzoffset", offsethours);
	var m = now_string.match(/[ \(]([A-Z]{3,6})[ \)]?[ \d]*$/);	// try three or more char tz first at the end or just before the year
	if (!m) {
		m = now_string.match(/[ \(]([A-Z]{1,6})[ \)]?[ \d]*$/);	// might be a "military" one if not
	}
	if (m) {
		m = m[1];
	} else {	// IE (sometimes) gives UTC +offset instead of the abbreviation
		// sadly this workaround will fail for non-whole hour offsets
		var hours = - now.getTimezoneOffset() / 60;
		m = "GMT" + (hours > 0 ? "+" : "") + hours;
	}
	// Etc/GMT+ is equivalent to GMT-
	if (m.substring(0,4) == "GMT+") {
		m = "Etc/GMT-" + m.substring(4);
		setCookie("local_tz", m);
	}
	if (m.substring(0,4) == "GMT-") {
		m = "Etc/GMT+" + m.substring(4);
		setCookie("local_tz", m);
	}
	if (inArray(m, allTimeZoneCodes)) {
		setCookie("local_tz", m);
	}
}

//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
$(document).ready(function(){
// jq_onready 0 
$("article").fitVids();
$("time.timeago").timeago(); jQuery.timeago.settings.allowFuture = true;
$(".table-responsive").doubleScroll({resetOnWindowResize: true});
$(".convert-mailto").removeClass("convert-mailto").each(function () {
				var address = $(this).data("encode-name") + "@" + $(this).data("encode-domain");
				$(this).attr("href", "mailto:" + address).text(address);
			});
$(".search_mod_magnifier").mouseover( function () {
	$(".search_mod_buttons", $(this).parents(".module"))
		.show('fast')
		.mouseleave( function () {
			$(this).hide('fast');
		});
}).click( function () {
	$(this).parents("form").submit();
});
$("#search_mod_input_1")
.keydown( function () {
	$(".search_mod_magnifier", $(this).parent()).mouseover();}
);
						
$("#search_mod_input_1").tiki("autocomplete", "pagename",{select: function(event, item) {
						$('#search-module-form1').data('page_selected', item.item.value).find("input[name=exact_match]").val("y");
						}, open: function(event, item) {
						$(".search_mod_buttons", "#search-module-form1").hide();
						}, close: function(event, item) {
						$(".search_mod_buttons", "#search-module-form1").show();
						}});
$(document).ready(function () {
  var resetCSS = {
    transition: 'all .5s ease 0s',
    top: '',
    height: '',
    minHeight: '',
    opacity: '',
    overflow: ''
  };
  $(window).on("scroll", function () {
    if ($(window).scrollTop() > 200) {
      $('.navbar.fixed-top, .navbar-fixed-top').css({
          transition: 'all .75s ease 0s',
          top: '-20px',
          height: '25px',
          minHeight: '5px',
          opacity: '.75',
          overflow: 'hidden'
      });
      $('html:not(#page_1) .topbar').css({
          'box-shadow': '0 5px 10px 0px rgba(0,0,0,.25)',
          position: 'fixed',
          top: '6px',
          width: '100%',
          left: 0,
          'z-index': 3
      });
    } else {
      $('.navbar.fixed-top, .navbar-fixed-top').css(resetCSS);
      $(".topbar").removeAttr('style');
    }
  });
  $('.navbar.fixed-top, .navbar-fixed-top').on('mouseover', function () {
    $(this).css(resetCSS);
    $('html:not(#page_1) .topbar').css({
      top: '46px'
    });
  });
});

$('.backtotop').hide();
function backtotop(){
    var scrolled = $(window).scrollTop();
    if (scrolled > 0) {
        $('.backtotop').fadeIn();
    } else {
        $('.backtotop').fadeOut().removeAttr('style');
    }
}
$(window).scroll(function(e){
    backtotop();
});
$('.backtotop a').click(function(event){
    event.preventDefault();
    $('html,body').animate({
        scrollTop:$('body').offset().top
    }, 1000);
});

$("#loginbox-1").submit( function () {
	if ($("#login-user_1").val() && $("#login-pass_1").val()) {
		return true;
	} else {
		$("#login-user_1").focus();
		return false;
	}
});
if (jqueryTiki.no_cookie) {
	$('.box-login_box input').each(function(){
		$(this).change(function() {
			if (jqueryTiki.no_cookie && $(this).val()) {
				alert(jqueryTiki.cookie_consent_alert);
			}
		});
	});
}

if ($('#login-user_1:visible').length) {if ($("#login-user_1").offset().top < $(window).height()) {$('#login-user_1')[0].focus();} }
});
//--><!]]>
</script>

	
		<!-- Piwik -->


<!-- End Piwik Code -->
</body>
</html>
